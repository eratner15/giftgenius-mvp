<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#6B46C1" />
    <meta name="description" content="GiftGenius - Find the perfect gift backed by real testimonials from men who've been there" />
    <title>GiftGenius - Gifts That Actually Work</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .app-container {
            background: #f8fafc;
            min-height: 100vh;
            padding-top: 20px;
        }
        
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px; 
        }
        
        /* Loading States */
        .loading { 
            text-align: center; 
            padding: 60px 20px;
            animation: pulse 2s infinite;
        }
        
        .gift-card-skeleton {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        .skeleton-image {
            height: 200px;
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        
        .skeleton-content {
            padding: 15px;
        }
        
        .skeleton-line {
            height: 12px;
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            border-radius: 6px;
            margin-bottom: 8px;
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* Enhanced Hero */
        .hero { 
            text-align: center; 
            margin-bottom: 40px;
            background: white;
            padding: 40px 20px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .hero h1 { 
            font-size: 3rem; 
            background: linear-gradient(135deg, #6B46C1, #9F7AEA);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 800;
        }
        
        .hero p { 
            color: #666; 
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .hero-stat {
            text-align: center;
        }
        
        .hero-stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #6B46C1;
        }
        
        .hero-stat-label {
            font-size: 0.9rem;
            color: #666;
        }
        
        /* Quick Filters */
        .quick-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .quick-filter-btn {
            padding: 8px 16px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .quick-filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        /* Enhanced Filters */
        .filters { 
            display: flex; 
            gap: 15px; 
            margin-bottom: 30px; 
            flex-wrap: wrap;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .filters select {
            padding: 12px 16px; 
            border: 2px solid #e2e8f0; 
            border-radius: 8px;
            font-size: 16px; 
            background: white; 
            min-width: 160px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .filters select:focus {
            outline: none;
            border-color: #6B46C1;
            box-shadow: 0 0 0 3px rgba(107, 70, 193, 0.1);
        }
        
        /* Filter Results Summary */
        .filter-results {
            background: linear-gradient(135deg, #ebf8ff, #e6fffa);
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #4299e1;
        }
        
        .filter-results .count {
            font-weight: bold;
            color: #2d3748;
        }
        
        .filter-tag {
            display: inline-block;
            background: rgba(107, 70, 193, 0.1);
            color: #6B46C1;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 8px;
        }
        
        /* Enhanced Gift Grid */
        .gift-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
        }
        
        .gift-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        
        .gift-card:hover { 
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
        }
        
        .gift-card:active {
            transform: translateY(-4px) scale(0.98);
        }
        
        .gift-card img { 
            width: 100%; 
            height: 220px; 
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .gift-card:hover img {
            transform: scale(1.05);
        }
        
        .gift-card-content { 
            padding: 20px; 
        }
        
        .gift-card h3 { 
            font-size: 1.2rem; 
            margin-bottom: 10px;
            font-weight: 600;
            line-height: 1.4;
        }
        
        .price { 
            font-size: 1.4rem; 
            color: #10B981; 
            font-weight: bold; 
            margin-bottom: 10px; 
        }
        
        .rating { 
            font-size: 0.9rem; 
            color: #666;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .success-hearts {
            animation: heartbeat 3s infinite;
        }
        
        @keyframes heartbeat {
            0%, 50%, 100% { transform: scale(1); }
            25% { transform: scale(1.05); }
        }
        
        .social-proof {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 0.75rem;
            color: #666;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #f0f0f0;
        }
        
        .trending-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        /* Enhanced Detail View */
        .detail-view {
            background: white;
            border-radius: 16px;
            padding: 30px;
            max-width: 900px;
            margin: 0 auto;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
        }
        
        .detail-img { 
            width: 100%; 
            max-height: 400px;
            object-fit: cover;
            border-radius: 12px; 
            margin-bottom: 25px; 
        }
        
        .back-btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            margin-bottom: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .get-gift-btn {
            display: block;
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            text-decoration: none;
            text-align: center;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: bold;
            margin: 25px 0;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
            transition: all 0.3s ease;
            border: none;
        }
        
        .get-gift-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.5);
        }
        
        .get-gift-btn .sub-text {
            font-size: 0.9rem;
            font-weight: normal;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        /* Enhanced Testimonials */
        .testimonial {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 4px solid #6B46C1;
            transition: transform 0.2s ease;
        }
        
        .testimonial:hover {
            transform: translateX(5px);
        }
        
        .testimonial-header { 
            font-weight: 600; 
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .testimonial-rating { 
            margin-bottom: 10px; 
            font-size: 1.1rem;
        }
        
        .testimonial-text {
            font-style: italic;
            line-height: 1.6;
            color: #4a5568;
            margin-bottom: 10px;
        }
        
        .testimonial-meta {
            font-size: 0.8rem;
            color: #718096;
        }
        
        /* Error States */
        .error-state {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .error-state h2 {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #e53e3e;
        }
        
        .error-state p {
            color: #666;
            margin-bottom: 20px;
        }
        
        .retry-btn {
            padding: 12px 24px;
            background: #6B46C1;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
        }
        
        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .gift-grid { 
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .filters { 
                flex-direction: column;
                gap: 10px;
            }
            
            .filters select {
                min-width: auto;
                width: 100%;
            }
            
            .hero h1 { 
                font-size: 2.2rem; 
            }
            
            .hero-stats {
                gap: 20px;
            }
            
            .quick-filters {
                justify-content: center;
            }
            
            .detail-view {
                padding: 20px;
                margin: 10px;
            }
            
            .container {
                padding: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
        }
        
        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* Focus states */
        .gift-card:focus,
        .back-btn:focus,
        .get-gift-btn:focus,
        .quick-filter-btn:focus {
            outline: 3px solid #6B46C1;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="module">
        import React from 'https://esm.sh/react@18';
        import ReactDOM from 'https://esm.sh/react-dom@18/client';

        const { useState, useEffect, useCallback, useMemo } = React;

        // Enhanced API configuration
        const API_CONFIG = {
            base_url: window.location.hostname === 'localhost' 
                ? 'http://localhost:3001' 
                : 'https://api-74vqh9434-eratner15s-projects.vercel.app',
            timeout: 10000,
            retries: 3
        };

        // Enhanced fetch with retry logic
        const fetchWithRetry = async (url, options = {}, retries = API_CONFIG.retries) => {
            for (let i = 0; i < retries; i++) {
                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), API_CONFIG.timeout);
                    
                    const response = await fetch(url, {
                        ...options,
                        signal: controller.signal
                    });
                    
                    clearTimeout(timeoutId);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    return response;
                } catch (error) {
                    console.warn(`Fetch attempt ${i + 1} failed:`, error.message);
                    
                    if (i === retries - 1) {
                        throw new Error(`Failed after ${retries} attempts: ${error.message}`);
                    }
                    
                    // Exponential backoff
                    await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000));
                }
            }
        };

        // Loading skeleton component
        const GiftCardSkeleton = () => (
            React.createElement('div', { className: 'gift-card-skeleton' },
                React.createElement('div', { className: 'skeleton-image' }),
                React.createElement('div', { className: 'skeleton-content' },
                    React.createElement('div', { className: 'skeleton-line', style: { width: '80%' }}),
                    React.createElement('div', { className: 'skeleton-line', style: { width: '60%' }}),
                    React.createElement('div', { className: 'skeleton-line', style: { width: '40%' }})
                )
            )
        );

        // Enhanced error boundary
        const ErrorBoundary = ({ children }) => {
            const [hasError, setHasError] = useState(false);
            const [error, setError] = useState(null);

            const resetError = () => {
                setHasError(false);
                setError(null);
            };

            if (hasError) {
                return React.createElement('div', { className: 'error-state' },
                    React.createElement('h2', null, '😅 Oops! Something went wrong'),
                    React.createElement('p', null, 'Don\'t worry, we\'re working on it. Try refreshing the page.'),
                    React.createElement('button', {
                        className: 'retry-btn',
                        onClick: resetError
                    }, 'Try Again'),
                    error && React.createElement('details', { style: { marginTop: '20px' }},
                        React.createElement('summary', null, 'Technical Details'),
                        React.createElement('pre', { style: { textAlign: 'left', fontSize: '12px' }}, error.toString())
                    )
                );
            }

            return children;
        };

        // Quick filters component
        const QuickFilters = ({ onFilterChange }) => {
            const quickFilters = [
                { label: '💎 Popular Jewelry Under $150', filter: { category: 'jewelry', maxPrice: 150, minSuccessRate: 90 }},
                { label: '🎭 Amazing Experiences', filter: { category: 'experiences', minSuccessRate: 85 }},
                { label: '💰 Budget Winners', filter: { maxPrice: 50, minSuccessRate: 80 }},
                { label: '❤️ Nearly Perfect Gifts', filter: { minSuccessRate: 95 }},
                { label: '🏠 Cozy Home Gifts', filter: { category: 'home', minSuccessRate: 85 }}
            ];

            return React.createElement('div', { className: 'quick-filters' },
                ...quickFilters.map((qf, index) =>
                    React.createElement('button', {
                        key: index,
                        className: 'quick-filter-btn',
                        onClick: () => onFilterChange(qf.filter)
                    }, qf.label)
                )
            );
        };

        // Enhanced filter results component
        const FilterResults = ({ count, filters, totalGifts }) => {
            const activeFilters = [];
            
            if (filters.category) activeFilters.push(filters.category);
            if (filters.maxPrice < 1000) activeFilters.push(`Under $${filters.maxPrice}`);
            if (filters.minSuccessRate > 0) activeFilters.push(`${filters.minSuccessRate}%+ success`);

            return React.createElement('div', { className: 'filter-results' },
                React.createElement('span', { className: 'count' },
                    `${count} of ${totalGifts} gifts found`
                ),
                ...activeFilters.map((filter, index) =>
                    React.createElement('span', {
                        key: index,
                        className: 'filter-tag'
                    }, filter)
                )
            );
        };

        // Enhanced social proof component
        const SocialProof = ({ gift }) => {
            const viewingNow = useMemo(() => Math.floor(Math.random() * 15) + 3, [gift.id]);
            
            return React.createElement('div', { className: 'social-proof' },
                React.createElement('span', null, `👀 ${viewingNow} viewing now`),
                React.createElement('span', null, `✅ ${gift.total_reviews} reviews`)
            );
        };

        // Main App Component
        function App() {
            const [gifts, setGifts] = useState([]);
            const [allGifts, setAllGifts] = useState([]);
            const [selectedGift, setSelectedGift] = useState(null);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);
            const [filter, setFilter] = useState({
                category: '',
                maxPrice: 1000,
                minSuccessRate: 0
            });

            // Initialize session and load gifts
            useEffect(() => {
                initializeSession();
                fetchGifts();
            }, []);

            // Filter gifts when filter changes
            useEffect(() => {
                applyFilters();
            }, [filter, allGifts]);

            const initializeSession = () => {
                if (!localStorage.getItem('sessionId')) {
                    const id = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    localStorage.setItem('sessionId', id);
                }
            };

            const fetchGifts = async () => {
                setLoading(true);
                setError(null);
                
                try {
                    const response = await fetchWithRetry(`${API_CONFIG.base_url}/api/gifts?limit=50`);
                    const data = await response.json();
                    
                    const giftsData = data.gifts || data || [];
                    setAllGifts(giftsData);
                    setGifts(giftsData);
                } catch (err) {
                    console.error('Failed to fetch gifts:', err);
                    setError(`Failed to load gifts: ${err.message}`);
                    
                    // Fallback to demo data
                    const fallbackGifts = [
                        {
                            id: 1,
                            title: "Personalized Star Map Necklace",
                            price: 89.99,
                            category: "jewelry",
                            success_rate: 100,
                            total_reviews: 4,
                            image_url: "https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=400",
                            affiliate_url: "https://example.com/star-map-necklace",
                            description: "Custom star map showing the night sky from any special date and location"
                        }
                    ];
                    setAllGifts(fallbackGifts);
                    setGifts(fallbackGifts);
                } finally {
                    setLoading(false);
                }
            };

            const applyFilters = useCallback(() => {
                let filteredGifts = [...allGifts];

                if (filter.category) {
                    filteredGifts = filteredGifts.filter(gift => 
                        gift.category === filter.category
                    );
                }

                if (filter.maxPrice < 1000) {
                    filteredGifts = filteredGifts.filter(gift => 
                        gift.price <= filter.maxPrice
                    );
                }

                if (filter.minSuccessRate > 0) {
                    filteredGifts = filteredGifts.filter(gift => 
                        gift.success_rate >= filter.minSuccessRate
                    );
                }

                setGifts(filteredGifts);
            }, [filter, allGifts]);

            const fetchGiftDetails = async (id) => {
                try {
                    setLoading(true);
                    const response = await fetchWithRetry(`${API_CONFIG.base_url}/api/gifts/${id}`);
                    const data = await response.json();
                    setSelectedGift(data);
                    trackEvent('view_gift', id);
                } catch (err) {
                    console.error('Error fetching gift details:', err);
                    setError('Failed to load gift details. Please try again.');
                } finally {
                    setLoading(false);
                }
            };

            const trackEvent = async (eventType, giftId) => {
                try {
                    await fetchWithRetry(`${API_CONFIG.base_url}/api/analytics/track`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            eventType,
                            giftId,
                            sessionId: localStorage.getItem('sessionId'),
                            timestamp: new Date().toISOString()
                        })
                    });
                } catch (error) {
                    console.warn('Analytics tracking failed:', error);
                }
            };

            const renderHearts = (rating) => {
                if (!rating) return '';
                const fullHearts = Math.floor(rating / 20);
                const hearts = [];
                for (let i = 0; i < 5; i++) {
                    hearts.push(i < fullHearts ? '❤️' : '🤍');
                }
                return hearts.join('');
            };

            const handleFilterChange = (newFilter) => {
                setFilter(prev => ({ ...prev, ...newFilter }));
            };

            const handleGetGift = (gift) => {
                trackEvent('click_buy', gift.id);
                window.open(gift.affiliate_url || gift.amazon_url, '_blank', 'noopener,noreferrer');
            };

            // Render gift detail view
            if (selectedGift && !loading) {
                const gift = selectedGift.gift || selectedGift;
                const testimonials = selectedGift.testimonials || [];

                return React.createElement('div', { className: 'app-container' },
                    React.createElement('div', { className: 'container' },
                        React.createElement('div', { className: 'detail-view' },
                            React.createElement('button', {
                                className: 'back-btn',
                                onClick: () => setSelectedGift(null)
                            }, '← Back to Gifts'),

                            React.createElement('img', {
                                src: gift.image_url,
                                alt: gift.title,
                                className: 'detail-img'
                            }),

                            React.createElement('h1', { 
                                style: { marginBottom: '15px', fontSize: '1.8rem' }
                            }, gift.title),

                            React.createElement('div', { className: 'price' }, `$${gift.price}`),

                            gift.success_rate > 0 && React.createElement('div', {
                                style: { 
                                    marginBottom: '20px', 
                                    fontSize: '1.1rem',
                                    display: 'flex',
                                    alignItems: 'center',
                                    gap: '10px'
                                }
                            },
                                React.createElement('span', { className: 'success-hearts' },
                                    renderHearts(gift.success_rate)
                                ),
                                React.createElement('span', null, 
                                    `${gift.success_rate}% of partners loved this gift`
                                ),
                                React.createElement('span', {
                                    style: { color: '#666', fontSize: '0.9rem' }
                                }, `(${gift.total_reviews} reviews)`)
                            ),

                            React.createElement('p', {
                                style: { 
                                    marginBottom: '25px', 
                                    lineHeight: '1.7',
                                    fontSize: '1.1rem'
                                }
                            }, gift.description),

                            React.createElement('button', {
                                className: 'get-gift-btn',
                                onClick: () => handleGetGift(gift),
                                style: { cursor: 'pointer' }
                            },
                                React.createElement('div', null, '🎁 Get This Gift'),
                                React.createElement('div', { className: 'sub-text' },
                                    `${gift.success_rate}% of partners loved this gift!`
                                )
                            ),

                            testimonials.length > 0 && React.createElement('div', null,
                                React.createElement('h2', {
                                    style: { 
                                        fontSize: '1.5rem', 
                                        marginBottom: '25px',
                                        marginTop: '40px'
                                    }
                                }, 'What Other Men Say'),

                                ...testimonials.map(testimonial =>
                                    React.createElement('div', {
                                        key: testimonial.id,
                                        className: 'testimonial'
                                    },
                                        React.createElement('div', { className: 'testimonial-header' },
                                            React.createElement('span', null, 
                                                `${testimonial.reviewer_name} • ${testimonial.relationship_stage || testimonial.relationship_length}`
                                            )
                                        ),
                                        React.createElement('div', { className: 'testimonial-rating' },
                                            '⭐'.repeat(testimonial.partner_rating)
                                        ),
                                        React.createElement('p', { className: 'testimonial-text' },
                                            `"${testimonial.testimonial_text || testimonial.review_text}"`
                                        ),
                                        React.createElement('div', { className: 'testimonial-meta' },
                                            testimonial.gift_occasion || 'Gift occasion'
                                        )
                                    )
                                )
                            )
                        )
                    )
                );
            }

            // Main gift browser view
            return React.createElement('div', { className: 'app-container' },
                React.createElement('div', { className: 'container' },
                    React.createElement('div', { className: 'hero' },
                        React.createElement('h1', null, '🎁 GiftGenius'),
                        React.createElement('p', null,
                            'Gift ideas that actually work, backed by real testimonials from men who\'ve been there'
                        ),
                        React.createElement('div', { className: 'hero-stats' },
                            React.createElement('div', { className: 'hero-stat' },
                                React.createElement('div', { className: 'hero-stat-number' }, allGifts.length || '24+'),
                                React.createElement('div', { className: 'hero-stat-label' }, 'Tested Gifts')
                            ),
                            React.createElement('div', { className: 'hero-stat' },
                                React.createElement('div', { className: 'hero-stat-number' }, '92%'),
                                React.createElement('div', { className: 'hero-stat-label' }, 'Average Success')
                            ),
                            React.createElement('div', { className: 'hero-stat' },
                                React.createElement('div', { className: 'hero-stat-number' }, '10k+'),
                                React.createElement('div', { className: 'hero-stat-label' }, 'Happy Partners')
                            )
                        )
                    ),

                    React.createElement(QuickFilters, { onFilterChange: handleFilterChange }),

                    React.createElement('div', { className: 'filters' },
                        React.createElement('select', {
                            value: filter.category,
                            onChange: (e) => handleFilterChange({ category: e.target.value }),
                            'aria-label': 'Filter by category'
                        },
                            React.createElement('option', { value: '' }, 'All Categories'),
                            React.createElement('option', { value: 'jewelry' }, '💎 Jewelry'),
                            React.createElement('option', { value: 'experiences' }, '🎭 Experiences'),
                            React.createElement('option', { value: 'home' }, '🏠 Home & Living'),
                            React.createElement('option', { value: 'fashion' }, '👗 Fashion'),
                            React.createElement('option', { value: 'beauty' }, '💄 Beauty'),
                            React.createElement('option', { value: 'tech' }, '📱 Tech'),
                            React.createElement('option', { value: 'unique' }, '✨ Unique')
                        ),

                        React.createElement('select', {
                            value: filter.maxPrice,
                            onChange: (e) => handleFilterChange({ maxPrice: parseInt(e.target.value) }),
                            'aria-label': 'Filter by price'
                        },
                            React.createElement('option', { value: 1000 }, 'Any Price'),
                            React.createElement('option', { value: 50 }, 'Under $50'),
                            React.createElement('option', { value: 100 }, 'Under $100'),
                            React.createElement('option', { value: 150 }, 'Under $150'),
                            React.createElement('option', { value: 300 }, 'Under $300')
                        ),

                        React.createElement('select', {
                            value: filter.minSuccessRate,
                            onChange: (e) => handleFilterChange({ minSuccessRate: parseInt(e.target.value) }),
                            'aria-label': 'Filter by success rate'
                        },
                            React.createElement('option', { value: 0 }, 'Any Success Rate'),
                            React.createElement('option', { value: 70 }, '70%+ Love It'),
                            React.createElement('option', { value: 80 }, '80%+ Love It'),
                            React.createElement('option', { value: 90 }, '90%+ Love It'),
                            React.createElement('option', { value: 95 }, '95%+ Love It')
                        )
                    ),

                    gifts.length > 0 && React.createElement(FilterResults, {
                        count: gifts.length,
                        filters: filter,
                        totalGifts: allGifts.length
                    }),

                    error && React.createElement('div', {
                        style: {
                            padding: '20px',
                            background: '#fed7d7',
                            color: '#9b2c2c',
                            borderRadius: '8px',
                            textAlign: 'center',
                            margin: '20px 0'
                        }
                    }, error),

                    loading ? React.createElement('div', { className: 'gift-grid' },
                        ...Array(6).fill(0).map((_, i) =>
                            React.createElement(GiftCardSkeleton, { key: i })
                        )
                    ) :

                    gifts.length === 0 ? React.createElement('div', {
                        style: { 
                            textAlign: 'center', 
                            padding: '60px 20px', 
                            color: '#666',
                            background: 'white',
                            borderRadius: '12px'
                        }
                    }, 
                        React.createElement('div', { style: { fontSize: '3rem', marginBottom: '20px' }}, '🔍'),
                        React.createElement('h3', { style: { marginBottom: '10px' }}, 'No gifts found'),
                        React.createElement('p', null, 'Try adjusting your filters or browse all categories'),
                        React.createElement('button', {
                            style: {
                                marginTop: '15px',
                                padding: '10px 20px',
                                background: '#6B46C1',
                                color: 'white',
                                border: 'none',
                                borderRadius: '6px',
                                cursor: 'pointer'
                            },
                            onClick: () => setFilter({ category: '', maxPrice: 1000, minSuccessRate: 0 })
                        }, 'Clear All Filters')
                    ) :

                    React.createElement('div', { className: 'gift-grid' },
                        ...gifts.map(gift =>
                            React.createElement('div', {
                                key: gift.id,
                                className: 'gift-card',
                                onClick: () => fetchGiftDetails(gift.id),
                                role: 'button',
                                tabIndex: 0,
                                'aria-label': `View details for ${gift.title}`,
                                onKeyDown: (e) => {
                                    if (e.key === 'Enter' || e.key === ' ') {
                                        e.preventDefault();
                                        fetchGiftDetails(gift.id);
                                    }
                                }
                            },
                                gift.success_rate >= 90 && React.createElement('div', { 
                                    className: 'trending-badge' 
                                }, '🔥 HOT'),

                                React.createElement('img', {
                                    src: gift.image_url,
                                    alt: gift.title,
                                    loading: 'lazy'
                                }),

                                React.createElement('div', { className: 'gift-card-content' },
                                    React.createElement('h3', null, gift.title),
                                    React.createElement('div', { className: 'price' }, `$${gift.price}`),
                                    
                                    gift.success_rate > 0 && React.createElement('div', { 
                                        className: 'rating' 
                                    },
                                        React.createElement('div', null,
                                            React.createElement('span', { className: 'success-hearts' },
                                                renderHearts(gift.success_rate)
                                            ),
                                            React.createElement('span', { 
                                                style: { marginLeft: '8px', fontSize: '0.9rem' }
                                            }, `${gift.success_rate}% love it`)
                                        ),
                                        React.createElement('span', { 
                                            style: { fontSize: '0.8rem', color: '#999' }
                                        }, `${gift.total_reviews} reviews`)
                                    ),

                                    React.createElement(SocialProof, { gift })
                                )
                            )
                        )
                    )
                )
            );
        }

        // Initialize and render the app with error boundary
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
            React.createElement(ErrorBoundary, null,
                React.createElement(App)
            )
        );
    </script>
</body>
</html>
