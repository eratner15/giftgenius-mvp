"use strict";(self.webpackChunkgiftgenius_frontend=self.webpackChunkgiftgenius_frontend||[]).push([[915],{915:(e,s,a)=>{a.r(s),a.d(s,{AchievementGallery:()=>d,ChallengeLeaderboard:()=>c,ChallengeManager:()=>i,GamificationProgress:()=>o,ViralChallengeCard:()=>l,default:()=>h});var r=a(555),t=a(43),n=a(579);class i{constructor(){this.activeChallenges=[],this.userProgress=new Map,this.leaderboard=[],this.achievements=[]}getChallenges(){return[{id:"perfect_streak",name:"\ud83d\udd25 Perfect Gift Streak",description:"Give 3 perfect gifts in a row (95%+ success rate)",type:"streak",target:3,reward:{badge:"\ud83c\udfc6",discount:25,points:500},duration:30,participants:1247,trending:!0},{id:"budget_master",name:"\ud83d\udcb0 Budget Master Challenge",description:"Find amazing gifts under $50 that get 5-star reactions",type:"budget",target:5,maxPrice:50,reward:{badge:"\ud83d\udc8e",cashback:10,points:300},duration:14,participants:892},{id:"gift_guru",name:"\ud83e\uddd9 Gift Guru Quest",description:"Help 10 friends find perfect gifts using your referral",type:"referral",target:10,reward:{badge:"\ud83d\udc51",freeGift:!0,points:1e3},duration:60,participants:456},{id:"seasonal_surprise",name:"\ud83c\udf84 Seasonal Surprise Sprint",description:"Complete holiday shopping for 5 people in one week",type:"seasonal",target:5,reward:{badge:"\ud83c\udf85",discount:30,points:600},duration:7,participants:2103,trending:!0},{id:"trend_setter",name:"\u2728 Trend Setter Challenge",description:"Be first to gift 3 trending items that go viral",type:"trending",target:3,reward:{badge:"\ud83d\ude80",influencerStatus:!0,points:800},duration:21,participants:634}]}joinChallenge(e,s){const a=this.activeChallenges.find(s=>s.id===e);if(!a)return null;const r={userId:s,challengeId:e,startedAt:Date.now(),current:0,target:a.target,completed:!1,milestones:[]};return this.userProgress.set("".concat(s,"_").concat(e),r),this.saveProgress(),r}updateProgress(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r="".concat(e,"_").concat(s),t=this.userProgress.get(r);if(!t||t.completed)return null;t.current+=a;const n=t.current/t.target*100;return n>=25&&!t.milestones.includes(25)&&(t.milestones.push(25),this.triggerMilestone(e,s,25)),n>=50&&!t.milestones.includes(50)&&(t.milestones.push(50),this.triggerMilestone(e,s,50)),n>=75&&!t.milestones.includes(75)&&(t.milestones.push(75),this.triggerMilestone(e,s,75)),t.current>=t.target&&(t.completed=!0,t.completedAt=Date.now(),this.awardRewards(e,s),this.updateLeaderboard(e,s)),this.userProgress.set(r,t),this.saveProgress(),t}triggerMilestone(e,s,a){const r=new CustomEvent("challenge-milestone",{detail:{userId:e,challengeId:s,percentage:a}});window.dispatchEvent(r)}awardRewards(e,s){const a=this.activeChallenges.find(e=>e.id===s);if(!a)return;const r=JSON.parse(localStorage.getItem("user_rewards")||"{}");r[e]||(r[e]=[]),r[e].push({challengeId:s,rewards:a.reward,earnedAt:Date.now()}),localStorage.setItem("user_rewards",JSON.stringify(r));const t=new CustomEvent("challenge-completed",{detail:{userId:e,challengeId:s,rewards:a.reward}});window.dispatchEvent(t)}updateLeaderboard(e,s){const a={userId:e,challengeId:s,completedAt:Date.now(),rank:this.leaderboard.length+1};this.leaderboard.push(a),this.leaderboard.sort((e,s)=>e.completedAt-s.completedAt),this.leaderboard.forEach((e,s)=>{e.rank=s+1}),localStorage.setItem("challenge_leaderboard",JSON.stringify(this.leaderboard))}getLeaderboard(e){return this.leaderboard.filter(s=>!e||s.challengeId===e).slice(0,10)}saveProgress(){const e=Array.from(this.userProgress.entries());localStorage.setItem("challenge_progress",JSON.stringify(e))}loadProgress(){const e=localStorage.getItem("challenge_progress");e&&(this.userProgress=new Map(JSON.parse(e)));const s=localStorage.getItem("challenge_leaderboard");s&&(this.leaderboard=JSON.parse(s)),this.activeChallenges=this.getChallenges()}}const l=e=>{let{challenge:s,userId:a,onJoin:r,onShare:l}=e;const[c,d]=(0,t.useState)(null),[o,h]=(0,t.useState)(!1),[m,g]=(0,t.useState)(!1),p=(0,t.useMemo)(()=>new i,[]);(0,t.useEffect)(()=>{p.loadProgress();const e=p.userProgress.get("".concat(a,"_").concat(s.id));e&&(d(e),h(!0))},[a,s.id,p]);const u=c?c.current/c.target*100:0;return(0,n.jsxs)("div",{className:"viral-challenge-card ".concat(s.trending?"trending":""),children:[s.trending&&(0,n.jsx)("div",{className:"trending-badge",children:"\ud83d\udd25 TRENDING"}),(0,n.jsxs)("div",{className:"challenge-header",children:[(0,n.jsx)("h3",{className:"challenge-name",children:s.name}),(0,n.jsxs)("div",{className:"challenge-participants",children:[(0,n.jsx)("span",{className:"participant-count",children:s.participants}),(0,n.jsx)("span",{className:"participant-label",children:"participants"})]})]}),(0,n.jsx)("p",{className:"challenge-description",children:s.description}),o&&c?(0,n.jsxs)("div",{className:"challenge-progress",children:[(0,n.jsxs)("div",{className:"progress-info",children:[(0,n.jsx)("span",{className:"progress-current",children:c.current}),(0,n.jsx)("span",{className:"progress-separator",children:"/"}),(0,n.jsx)("span",{className:"progress-target",children:c.target}),(0,n.jsx)("span",{className:"progress-label",children:"completed"})]}),(0,n.jsx)("div",{className:"progress-bar",children:(0,n.jsxs)("div",{className:"progress-fill",style:{width:"".concat(Math.min(100,u),"%")},children:[u>=25&&(0,n.jsx)("span",{className:"milestone m25",children:"\u2713"}),u>=50&&(0,n.jsx)("span",{className:"milestone m50",children:"\u2713"}),u>=75&&(0,n.jsx)("span",{className:"milestone m75",children:"\u2713"})]})}),c.completed&&(0,n.jsx)("div",{className:"completion-badge",children:"\ud83c\udf89 COMPLETED!"})]}):(0,n.jsx)("div",{className:"challenge-preview",children:(0,n.jsxs)("div",{className:"challenge-stats",children:[(0,n.jsxs)("div",{className:"stat",children:[(0,n.jsx)("span",{className:"stat-icon",children:"\ud83c\udfaf"}),(0,n.jsx)("span",{className:"stat-value",children:s.target}),(0,n.jsx)("span",{className:"stat-label",children:"Goal"})]}),(0,n.jsxs)("div",{className:"stat",children:[(0,n.jsx)("span",{className:"stat-icon",children:"\u23f1\ufe0f"}),(0,n.jsxs)("span",{className:"stat-value",children:[s.duration,"d"]}),(0,n.jsx)("span",{className:"stat-label",children:"Duration"})]})]})}),(0,n.jsxs)("div",{className:"challenge-rewards",children:[(0,n.jsx)("h4",{children:"Rewards:"}),(0,n.jsxs)("div",{className:"reward-items",children:[s.reward.badge&&(0,n.jsxs)("div",{className:"reward-item",children:[(0,n.jsx)("span",{className:"reward-icon",children:s.reward.badge}),(0,n.jsx)("span",{className:"reward-label",children:"Badge"})]}),s.reward.discount&&(0,n.jsxs)("div",{className:"reward-item",children:[(0,n.jsxs)("span",{className:"reward-value",children:[s.reward.discount,"%"]}),(0,n.jsx)("span",{className:"reward-label",children:"Discount"})]}),s.reward.points&&(0,n.jsxs)("div",{className:"reward-item",children:[(0,n.jsx)("span",{className:"reward-value",children:s.reward.points}),(0,n.jsx)("span",{className:"reward-label",children:"Points"})]}),s.reward.freeGift&&(0,n.jsxs)("div",{className:"reward-item",children:[(0,n.jsx)("span",{className:"reward-icon",children:"\ud83c\udf81"}),(0,n.jsx)("span",{className:"reward-label",children:"Free Gift"})]})]})]}),(0,n.jsxs)("div",{className:"challenge-actions",children:[o?(0,n.jsxs)("button",{className:"view-details-btn",onClick:()=>g(!m),children:[m?"Hide":"View"," Details"]}):(0,n.jsx)("button",{className:"join-challenge-btn",onClick:()=>{const e=p.joinChallenge(s.id,a);d(e),h(!0),r&&r(s)},children:"Join Challenge"}),(0,n.jsx)("button",{className:"share-challenge-btn",onClick:()=>l&&l(s),children:"\ud83d\udce4 Share"})]}),m&&(0,n.jsxs)("div",{className:"challenge-details",children:[(0,n.jsxs)("div",{className:"detail-section",children:[(0,n.jsx)("h5",{children:"How to Win:"}),(0,n.jsxs)("ol",{children:[(0,n.jsx)("li",{children:"Join the challenge"}),(0,n.jsx)("li",{children:"Complete the required tasks"}),(0,n.jsx)("li",{children:"Track your progress"}),(0,n.jsx)("li",{children:"Claim your rewards!"})]})]}),(0,n.jsxs)("div",{className:"detail-section",children:[(0,n.jsx)("h5",{children:"Tips:"}),(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"Share with friends for bonus points"}),(0,n.jsx)("li",{children:"Complete milestones for extra rewards"}),(0,n.jsx)("li",{children:"Check daily for new opportunities"})]})]})]})]})},c=e=>{let{challengeId:s,currentUserId:a}=e;const[l,c]=(0,t.useState)([]),[d,o]=(0,t.useState)("all"),h=(0,t.useMemo)(()=>new i,[]);return(0,t.useEffect)(()=>{h.loadProgress();const e=h.getLeaderboard(s).map((e,s)=>(0,r.A)((0,r.A)({},e),{},{username:"User".concat(e.userId.substring(0,4)),avatar:"".concat(e.userId.charAt(0).toUpperCase()),points:1e3-100*s,badges:Math.floor(5*Math.random())+1}));c(e)},[s,d,h]),(0,n.jsxs)("div",{className:"challenge-leaderboard",children:[(0,n.jsxs)("div",{className:"leaderboard-header",children:[(0,n.jsx)("h2",{children:"\ud83c\udfc6 Challenge Leaderboard"}),(0,n.jsxs)("div",{className:"leaderboard-filters",children:[(0,n.jsx)("button",{className:"filter-btn ".concat("all"===d?"active":""),onClick:()=>o("all"),children:"All Time"}),(0,n.jsx)("button",{className:"filter-btn ".concat("week"===d?"active":""),onClick:()=>o("week"),children:"This Week"}),(0,n.jsx)("button",{className:"filter-btn ".concat("today"===d?"active":""),onClick:()=>o("today"),children:"Today"})]})]}),(0,n.jsxs)("div",{className:"leaderboard-list",children:[l.map((e,s)=>(0,n.jsxs)("div",{className:"leaderboard-entry ".concat(e.userId===a?"current-user":""),children:[(0,n.jsxs)("div",{className:"rank",children:[1===e.rank&&"\ud83e\udd47",2===e.rank&&"\ud83e\udd48",3===e.rank&&"\ud83e\udd49",e.rank>3&&e.rank]}),(0,n.jsx)("div",{className:"user-avatar",children:e.avatar}),(0,n.jsxs)("div",{className:"user-info",children:[(0,n.jsx)("div",{className:"username",children:e.username}),(0,n.jsxs)("div",{className:"user-stats",children:[(0,n.jsxs)("span",{className:"stat-badges",children:["\ud83c\udfc5 ",e.badges]}),(0,n.jsxs)("span",{className:"stat-points",children:["\u2b50 ",e.points]})]})]}),(0,n.jsx)("div",{className:"completion-time",children:new Date(e.completedAt).toLocaleDateString()})]},"".concat(e.userId,"_").concat(e.challengeId))),0===l.length&&(0,n.jsx)("div",{className:"empty-leaderboard",children:(0,n.jsx)("p",{children:"No completions yet. Be the first!"})})]})]})},d=e=>{let{userId:s}=e;const[a,r]=(0,t.useState)([]),[i,l]=(0,t.useState)("all"),c=[{id:"first_gift",name:"First Gift",icon:"\ud83c\udf81",description:"Gave your first gift",earned:!0,rarity:"common"},{id:"perfect_10",name:"Perfect 10",icon:"\ud83d\udcaf",description:"10 successful gifts in a row",earned:!0,rarity:"rare"},{id:"trend_setter",name:"Trend Setter",icon:"\ud83d\ude80",description:"Started a gift trend",earned:!1,rarity:"epic"},{id:"gift_guru",name:"Gift Guru",icon:"\ud83e\uddd9",description:"Master of gift giving",earned:!1,rarity:"legendary"},{id:"budget_hero",name:"Budget Hero",icon:"\ud83d\udcb0",description:"Found 50 gifts under $25",earned:!0,rarity:"uncommon"},{id:"speed_demon",name:"Speed Demon",icon:"\u26a1",description:"Completed shopping in record time",earned:!1,rarity:"rare"},{id:"social_butterfly",name:"Social Butterfly",icon:"\ud83e\udd8b",description:"Shared 25 gifts with friends",earned:!0,rarity:"uncommon"},{id:"collector",name:"The Collector",icon:"\ud83d\udce6",description:"Collected 100 gift ideas",earned:!1,rarity:"epic"}];(0,t.useEffect)(()=>{let e=c;"earned"===i?e=c.filter(e=>e.earned):"locked"===i&&(e=c.filter(e=>!e.earned)),r(e)},[i,c]);const d=e=>{const s={common:"#9CA3AF",uncommon:"#10B981",rare:"#3B82F6",epic:"#8B5CF6",legendary:"#F59E0B"};return s[e]||s.common};return(0,n.jsxs)("div",{className:"achievement-gallery",children:[(0,n.jsxs)("div",{className:"gallery-header",children:[(0,n.jsx)("h2",{children:"\ud83c\udfc6 Your Achievements"}),(0,n.jsxs)("div",{className:"achievement-stats",children:[(0,n.jsxs)("span",{className:"earned-count",children:[c.filter(e=>e.earned).length,"/",c.length]}),(0,n.jsx)("span",{className:"earned-label",children:"Unlocked"})]})]}),(0,n.jsxs)("div",{className:"gallery-filters",children:[(0,n.jsx)("button",{className:"filter-btn ".concat("all"===i?"active":""),onClick:()=>l("all"),children:"All"}),(0,n.jsx)("button",{className:"filter-btn ".concat("earned"===i?"active":""),onClick:()=>l("earned"),children:"Earned"}),(0,n.jsx)("button",{className:"filter-btn ".concat("locked"===i?"active":""),onClick:()=>l("locked"),children:"Locked"})]}),(0,n.jsx)("div",{className:"achievement-grid",children:a.map(e=>(0,n.jsxs)("div",{className:"achievement-card ".concat(e.earned?"earned":"locked"),style:{borderColor:e.earned?d(e.rarity):"#E5E7EB"},children:[(0,n.jsx)("div",{className:"achievement-icon",children:e.earned?e.icon:"\ud83d\udd12"}),(0,n.jsx)("h4",{className:"achievement-name",children:e.name}),(0,n.jsx)("p",{className:"achievement-description",children:e.description}),(0,n.jsx)("div",{className:"achievement-rarity",style:{color:d(e.rarity)},children:e.rarity.toUpperCase()})]},e.id))})]})},o=e=>{let{userId:s}=e;const[a,r]=(0,t.useState)(1),[i,l]=(0,t.useState)(0),[c,d]=(0,t.useState)(100),[o,h]=(0,t.useState)(0);(0,t.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user_gamification")||"{}");e[s]&&(r(e[s].level||1),l(e[s].xp||0),h(e[s].streak||0)),d(100*a)},[s,a]);const m=i/c*100;return(0,n.jsxs)("div",{className:"gamification-progress",children:[(0,n.jsxs)("div",{className:"level-info",children:[(0,n.jsx)("div",{className:"level-badge",children:(0,n.jsxs)("span",{className:"level-number",children:["LVL ",a]})}),(0,n.jsxs)("div",{className:"progress-details",children:[(0,n.jsxs)("div",{className:"xp-info",children:[(0,n.jsx)("span",{className:"current-xp",children:i}),(0,n.jsx)("span",{className:"xp-separator",children:"/"}),(0,n.jsxs)("span",{className:"next-level-xp",children:[c," XP"]})]}),(0,n.jsx)("div",{className:"progress-bar",children:(0,n.jsx)("div",{className:"xp-fill",style:{width:"".concat(m,"%")}})})]})]}),o>0&&(0,n.jsxs)("div",{className:"streak-indicator",children:[(0,n.jsx)("span",{className:"streak-icon",children:"\ud83d\udd25"}),(0,n.jsx)("span",{className:"streak-count",children:o}),(0,n.jsx)("span",{className:"streak-label",children:"day streak"})]})]})},h={ChallengeManager:i,ViralChallengeCard:l,ChallengeLeaderboard:c,AchievementGallery:d,GamificationProgress:o}}}]);
//# sourceMappingURL=915.84b4a226.chunk.js.map