"use strict";(self.webpackChunkgiftgenius_frontend=self.webpackChunkgiftgenius_frontend||[]).push([[167],{167:(e,t,s)=>{s.r(t),s.d(t,{PullToRefresh:()=>u,SwipeableGiftCard:()=>o,TouchButton:()=>r,TouchModal:()=>d,TouchSlider:()=>h,default:()=>m,useTouchGestures:()=>i});var a=s(555),n=s(43),l=s(579);const c=["children","onClick","disabled","variant","size","hapticFeedback","className"],i=function(){let{onSwipeLeft:e,onSwipeRight:t,onSwipeUp:s,onSwipeDown:l,onPinchZoom:c,onDoubleTap:i,onLongPress:o,sensitivity:r=50,longPressDuration:u=500}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[h,d]=(0,n.useState)({startX:0,startY:0,endX:0,endY:0,startTime:0,touches:[],isLongPressing:!1,lastTap:0}),m=(0,n.useRef)(null),f=(0,n.useRef)(null);return[{onTouchStart:(0,n.useCallback)(e=>{const t=e.touches[0],s=Date.now();d(n=>(0,a.A)((0,a.A)({},n),{},{startX:t.clientX,startY:t.clientY,endX:t.clientX,endY:t.clientY,startTime:s,touches:Array.from(e.touches),isLongPressing:!1})),o&&1===e.touches.length&&(m.current=setTimeout(()=>{d(e=>(0,a.A)((0,a.A)({},e),{},{isLongPressing:!0})),o(e)},u)),i&&1===e.touches.length&&(s-h.lastTap<300?(i(e),d(e=>(0,a.A)((0,a.A)({},e),{},{lastTap:0}))):d(e=>(0,a.A)((0,a.A)({},e),{},{lastTap:s})))},[o,i,u,h.lastTap]),onTouchMove:(0,n.useCallback)(e=>{e.preventDefault();const t=e.touches[0];if(d(s=>(0,a.A)((0,a.A)({},s),{},{endX:t.clientX,endY:t.clientY,touches:Array.from(e.touches)})),m.current&&(clearTimeout(m.current),m.current=null),c&&2===e.touches.length){const t=e.touches[0],s=e.touches[1],a=Math.hypot(s.clientX-t.clientX,s.clientY-t.clientY);if(2===h.touches.length){const e=h.touches[0],n=h.touches[1],l=Math.hypot(n.clientX-e.clientX,n.clientY-e.clientY);c({scale:a/l,center:{x:(t.clientX+s.clientX)/2,y:(t.clientY+s.clientY)/2}})}}},[c,h.touches]),onTouchEnd:(0,n.useCallback)(n=>{if(m.current&&(clearTimeout(m.current),m.current=null),h.isLongPressing)return;const c=h.endX-h.startX,i=h.endY-h.startY,o=Date.now()-h.startTime;if(0===n.touches.length&&1===h.touches.length){const a=Math.abs(c),n=Math.abs(i);(a>r||n>r)&&o<1e3&&(a>n?c>0&&t?t({deltaX:c,deltaY:i,deltaTime:o}):c<0&&e&&e({deltaX:c,deltaY:i,deltaTime:o}):i>0&&l?l({deltaX:c,deltaY:i,deltaTime:o}):i<0&&s&&s({deltaX:c,deltaY:i,deltaTime:o}))}d(e=>(0,a.A)((0,a.A)({},e),{},{touches:Array.from(n.touches),isLongPressing:!1}))},[h,e,t,s,l,r]),ref:f},h]},o=e=>{let{gift:t,onSwipeLeft:s,onSwipeRight:c,onDoubleTap:o,onLongPress:r,className:u=""}=e;const[h,d]=(0,n.useState)(!1),[m,f]=(0,n.useState)(""),[p,g]=(0,n.useState)(1),b=(0,n.useCallback)(e=>{d(!0),f("translateX(-100%) rotateZ(-10deg)"),g(0),setTimeout(()=>{s&&s(t,e),f(""),g(1),d(!1)},300)},[t,s]),v=(0,n.useCallback)(e=>{d(!0),f("translateX(100%) rotateZ(10deg)"),g(0),setTimeout(()=>{c&&c(t,e),f(""),g(1),d(!1)},300)},[t,c]),x=(0,n.useCallback)(e=>{f("scale(1.05)"),setTimeout(()=>f(""),200),o&&o(t,e)},[t,o]),T=(0,n.useCallback)(e=>{f("scale(0.95)"),setTimeout(()=>f(""),500),r&&r(t,e)},[t,r]),[N]=i({onSwipeLeft:b,onSwipeRight:v,onDoubleTap:x,onLongPress:T,sensitivity:80});return(0,l.jsxs)("div",(0,a.A)((0,a.A)({},N),{},{className:"swipeable-gift-card ".concat(u," ").concat(h?"animating":""),style:{transform:m,opacity:p,transition:h?"all 0.3s ease-out":"transform 0.2s ease-out"},children:[(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("img",{src:t.image_url||"/api/placeholder/200/200",alt:t.name||t.title,className:"gift-image",draggable:"false"}),(0,l.jsxs)("div",{className:"gift-info",children:[(0,l.jsx)("h3",{children:t.name||t.title}),(0,l.jsxs)("p",{className:"gift-price",children:["$",t.price]}),(0,l.jsxs)("div",{className:"gift-rating",children:["\u2605".repeat(Math.floor(t.success_rate/20)),(0,l.jsxs)("span",{className:"rating-text",children:[t.success_rate,"% success"]})]})]})]}),(0,l.jsxs)("div",{className:"swipe-indicators",children:[(0,l.jsxs)("div",{className:"swipe-hint left",children:[(0,l.jsx)("span",{className:"hint-icon",children:"\ud83d\udc4e"}),(0,l.jsx)("span",{className:"hint-text",children:"Skip"})]}),(0,l.jsxs)("div",{className:"swipe-hint right",children:[(0,l.jsx)("span",{className:"hint-icon",children:"\u2764\ufe0f"}),(0,l.jsx)("span",{className:"hint-text",children:"Like"})]})]})]}))},r=e=>{let{children:t,onClick:s,disabled:i=!1,variant:o="primary",size:r="medium",hapticFeedback:u=!0,className:h=""}=e,d=function(e,t){if(null==e)return{};var s,a,n=function(e,t){if(null==e)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)s=l[a],-1===t.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}(e,c);const[m,f]=(0,n.useState)(!1),[p,g]=(0,n.useState)([]),b=(0,n.useCallback)(e=>{f(!0),u&&navigator.vibrate&&navigator.vibrate(10);const t=e.currentTarget.getBoundingClientRect(),s=Math.max(t.width,t.height),a=e.touches[0].clientX-t.left-s/2,n=e.touches[0].clientY-t.top-s/2,l={id:Date.now(),x:a,y:n,size:s};g(e=>[...e,l]),setTimeout(()=>{g(e=>e.filter(e=>e.id!==l.id))},600)},[u]),v=(0,n.useCallback)(e=>{f(!1),!i&&s&&setTimeout(()=>s(e),50)},[i,s]),x=["touch-button","touch-button--".concat(o),"touch-button--".concat(r),m&&"touch-button--pressed",i&&"touch-button--disabled",h].filter(Boolean).join(" ");return(0,l.jsxs)("button",(0,a.A)((0,a.A)({className:x,onTouchStart:b,onTouchEnd:v,onTouchCancel:()=>f(!1),disabled:i},d),{},{children:[(0,l.jsx)("span",{className:"button-content",children:t}),p.map(e=>(0,l.jsx)("span",{className:"button-ripple",style:{left:e.x,top:e.y,width:e.size,height:e.size}},e.id))]}))},u=e=>{let{children:t,onRefresh:s,threshold:a=80,maxPull:c=120,className:i=""}=e;const[o,r]=(0,n.useState)(0),[u,h]=(0,n.useState)(!1),[d,m]=(0,n.useState)(!1),f=(0,n.useRef)(null),p=(0,n.useCallback)(e=>{0===window.scrollY&&m(!0)},[]),g=(0,n.useCallback)(e=>{if(!d||u)return;const t=e.touches[0],s=f.current,a=s.dataset.startY||t.clientY;s.dataset.startY||(s.dataset.startY=t.clientY);const n=t.clientY,l=Math.min(c,Math.max(0,.5*(n-a)));r(l),l>0&&e.preventDefault()},[d,u,c]),b=(0,n.useCallback)(async()=>{if(delete f.current.dataset.startY,m(!1),o>=a&&!u){h(!0);try{s&&await s()}catch(e){console.error("Refresh failed:",e)}setTimeout(()=>{h(!1),r(0)},500)}else r(0)},[o,a,u,s]),v=o/a,x=180*v;return(0,l.jsxs)("div",{ref:f,className:"pull-to-refresh ".concat(i),onTouchStart:p,onTouchMove:g,onTouchEnd:b,children:[(0,l.jsx)("div",{className:"pull-indicator",style:{height:o,opacity:v},children:(0,l.jsxs)("div",{className:"pull-content",children:[u?(0,l.jsx)("div",{className:"refresh-spinner",children:(0,l.jsx)("div",{className:"spinner-ring"})}):(0,l.jsx)("div",{className:"refresh-icon",style:{transform:"rotate(".concat(x,"deg)")},children:"\u21bb"}),(0,l.jsx)("span",{className:"pull-text",children:u?"Refreshing...":o>=a?"Release to refresh":"Pull to refresh"})]})}),(0,l.jsx)("div",{className:"refresh-content",style:{transform:"translateY(".concat(o,"px)"),transition:0===o?"transform 0.3s ease-out":"none"},children:t})]})},h=e=>{let{value:t=0,min:s=0,max:a=100,step:c=1,onChange:i,onChangeComplete:o,disabled:r=!1,className:u=""}=e;const[h,d]=(0,n.useState)(!1),[m,f]=(0,n.useState)(t),p=(0,n.useRef)(null),g=(0,n.useRef)(null),b=(0,n.useCallback)(e=>{const t=p.current.getBoundingClientRect(),n=Math.max(0,Math.min(1,(e-t.left)/t.width)),l=s+n*(a-s),i=Math.round(l/c)*c;return Math.max(s,Math.min(a,i))},[s,a,c]),v=(0,n.useCallback)(e=>{if(r)return;d(!0);const t=b(e.touches[0].clientX);f(t),i&&i(t),navigator.vibrate&&navigator.vibrate(5)},[r,b,i]),x=(0,n.useCallback)(e=>{if(!h||r)return;e.preventDefault();const t=b(e.touches[0].clientX);t!==m&&(f(t),i&&i(t),navigator.vibrate&&navigator.vibrate(2))},[h,r,b,i,m]),T=(0,n.useCallback)(()=>{h&&(d(!1),o&&o(m))},[h,o,m]),N=(m-s)/(a-s)*100;return(0,l.jsxs)("div",{ref:p,className:"touch-slider ".concat(h?"dragging":""," ").concat(r?"disabled":""," ").concat(u),onTouchStart:v,onTouchMove:x,onTouchEnd:T,onTouchCancel:T,children:[(0,l.jsx)("div",{className:"slider-track",children:(0,l.jsx)("div",{className:"slider-fill",style:{width:"".concat(N,"%")}})}),(0,l.jsx)("div",{ref:g,className:"slider-thumb",style:{left:"".concat(N,"%")},children:(0,l.jsx)("div",{className:"thumb-indicator",children:(0,l.jsx)("span",{className:"value-display",children:m})})})]})},d=e=>{let{isOpen:t,onClose:s,children:c,title:o,showCloseButton:u=!0,swipeToClose:h=!0,className:d=""}=e;const[m,f]=(0,n.useState)(""),[p,g]=(0,n.useState)(1),b=(0,n.useRef)(null),v=(0,n.useCallback)(e=>{if(!h)return;const{deltaY:t}=e;t>100&&(f("translateY(100%)"),g(0),setTimeout(()=>{s&&s(),f(""),g(1)},300))},[h,s]),[x]=i({onSwipeDown:v,sensitivity:30});return t?(0,l.jsx)("div",{className:"touch-modal-backdrop ".concat(d),style:{opacity:p},children:(0,l.jsxs)("div",(0,a.A)((0,a.A)({ref:b},x),{},{className:"touch-modal-content",style:{transform:m,transition:m?"all 0.3s ease-out":"none"},children:[h&&(0,l.jsx)("div",{className:"modal-handle",children:(0,l.jsx)("div",{className:"handle-bar"})}),(o||u)&&(0,l.jsxs)("div",{className:"modal-header",children:[o&&(0,l.jsx)("h2",{className:"modal-title",children:o}),u&&(0,l.jsx)(r,{variant:"ghost",size:"small",onClick:s,className:"modal-close-btn",children:"\u2715"})]}),(0,l.jsx)("div",{className:"modal-body",children:c})]}))}):null},m={useTouchGestures:i,SwipeableGiftCard:o,TouchButton:r,PullToRefresh:u,TouchSlider:h,TouchModal:d}}}]);
//# sourceMappingURL=167.febcdeca.chunk.js.map