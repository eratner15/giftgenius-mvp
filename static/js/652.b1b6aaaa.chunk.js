"use strict";(self.webpackChunkgiftgenius_frontend=self.webpackChunkgiftgenius_frontend||[]).push([[38,167,652],{38:(e,a,s)=>{s.r(a),s.d(a,{CameraScanner:()=>d,QuickScanButton:()=>h,default:()=>m,useCameraCapabilities:()=>l,useImageAnalysis:()=>c});var t=s(555),n=s(43),i=s(579);const l=()=>{const[e,a]=(0,n.useState)({hasCamera:!1,hasMultipleCameras:!1,supportsFacingMode:!1,supportsFlash:!1,supportsZoom:!1,maxResolution:null,error:null});return(0,n.useEffect)(()=>{(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera not supported in this browser");const e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind);a({hasCamera:e.length>0,hasMultipleCameras:e.length>1,supportsFacingMode:e.some(e=>e.label.includes("back")||e.label.includes("rear")),supportsFlash:"torch"in navigator,supportsZoom:!0,maxResolution:{width:1920,height:1080},devices:e,error:null})}catch(e){console.error("Camera capability detection failed:",e),a(a=>(0,t.A)((0,t.A)({},a),{},{error:e.message}))}})()},[]),e},c=()=>{const[e,a]=(0,n.useState)(!1),[s,t]=(0,n.useState)(null),[i,l]=(0,n.useState)(null);return{analyzeImage:(0,n.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(!0),l(null);try{let a=e;e instanceof HTMLCanvasElement&&(a=e.toDataURL("image/jpeg",.8));const n=await r(a,s);return t(n),n}catch(n){return console.error("Image analysis failed:",n),l(n.message),null}finally{a(!1)}},[]),clearResults:(0,n.useCallback)(()=>{t(null),l(null)},[]),isAnalyzing:e,results:s,error:i}},r=async(e,a)=>{await new Promise(e=>setTimeout(e,1500+1e3*Math.random()));const s=.7+.25*Math.random(),t=["jewelry","clothing","electronics","books","art","home-decor","sports-equipment","beauty-products","toys","accessories"],n=["red","blue","green","yellow","black","white","pink","purple","gold","silver"],i=["Apple","Samsung","Nike","Adidas","Coach","Gucci","Sony","Generic"],l=t[Math.floor(Math.random()*t.length)],c=n[Math.floor(Math.random()*n.length)],r=i[Math.floor(Math.random()*i.length)];return{confidence:s,category:l,subcategories:[l,"gift-item"],colors:[c],brand:r,features:["high-quality","popular-item",c,"gift-worthy"],suggestedTags:[l,c,r.toLowerCase()],recommendations:o(l),timestamp:Date.now()}},o=e=>({jewelry:[{name:"Sterling Silver Necklace",price:89.99,match:95},{name:"Diamond Earrings",price:299.99,match:88},{name:"Gold Bracelet",price:149.99,match:82}],electronics:[{name:"Wireless Headphones",price:199.99,match:92},{name:"Smart Watch",price:299.99,match:87},{name:"Portable Speaker",price:79.99,match:85}],clothing:[{name:"Designer Scarf",price:59.99,match:90},{name:"Leather Jacket",price:199.99,match:85},{name:"Cashmere Sweater",price:129.99,match:88}]}[e]||[{name:"Similar Gift Item 1",price:49.99,match:85},{name:"Similar Gift Item 2",price:79.99,match:80},{name:"Similar Gift Item 3",price:99.99,match:75}]),d=e=>{let{onCapture:a,onAnalysis:s,onClose:t,facingMode:r="environment",className:o=""}=e;const[d,h]=(0,n.useState)(null),[m,u]=(0,n.useState)(!1),[p,x]=(0,n.useState)(!1),[b,g]=(0,n.useState)(1),[v,j]=(0,n.useState)(null),N=(0,n.useRef)(null),f=(0,n.useRef)(null),y=l(),{analyzeImage:C,clearResults:w,isAnalyzing:S,results:k,error:T}=c(),A=(0,n.useCallback)(async()=>{try{j(null);const e={video:{facingMode:r,width:{ideal:1920,max:1920},height:{ideal:1080,max:1080}}},a=await navigator.mediaDevices.getUserMedia(e);h(a),N.current&&(N.current.srcObject=a,await N.current.play(),u(!0))}catch(e){console.error("Failed to start camera:",e),j("Camera access failed: ".concat(e.message))}},[r]),M=(0,n.useCallback)(()=>{d&&(d.getTracks().forEach(e=>e.stop()),h(null),u(!1))},[d]),B=(0,n.useCallback)(async()=>{if(!N.current||!f.current)return;const e=N.current,t=f.current,n=t.getContext("2d");t.width=e.videoWidth,t.height=e.videoHeight,n.drawImage(e,0,0,t.width,t.height);const i=t.toDataURL("image/jpeg",.8),l=document.createElement("div");l.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: white;\n      z-index: 9999;\n      opacity: 0.8;\n      pointer-events: none;\n    ",document.body.appendChild(l),setTimeout(()=>{document.body.removeChild(l)},150);try{new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+Dto2QdCCuI0fPBdSUGJ3nI9NaOPAgTYbe").play().catch(()=>{})}catch(c){}if(a&&a(i,t),s){const e=await C(t);e&&s(e,i)}navigator.vibrate&&navigator.vibrate(50)},[a,s,C]),Y=(0,n.useCallback)(async()=>{if(d)try{const e=d.getVideoTracks()[0];e.getCapabilities().torch&&(await e.applyConstraints({advanced:[{torch:!p}]}),x(!p))}catch(e){console.error("Flash toggle failed:",e)}},[d,p]),z=(0,n.useCallback)(async e=>{if(d)try{const a=d.getVideoTracks()[0],s=a.getCapabilities();if(s.zoom){const t=Math.max(s.zoom.min,Math.min(s.zoom.max,e));await a.applyConstraints({advanced:[{zoom:t}]}),g(t)}}catch(a){console.error("Zoom adjustment failed:",a)}},[d]);return(0,n.useEffect)(()=>(y.hasCamera&&!y.error&&A(),()=>{M()}),[y.hasCamera,y.error,A,M]),y.error?(0,i.jsx)("div",{className:"camera-scanner error ".concat(o),children:(0,i.jsxs)("div",{className:"error-message",children:[(0,i.jsx)("h3",{children:"Camera Unavailable"}),(0,i.jsx)("p",{children:y.error}),(0,i.jsx)("button",{onClick:t,children:"Close"})]})}):(0,i.jsxs)("div",{className:"camera-scanner ".concat(o),children:[(0,i.jsxs)("div",{className:"camera-container",children:[(0,i.jsx)("video",{ref:N,autoPlay:!0,playsInline:!0,muted:!0,className:"camera-video"}),(0,i.jsx)("canvas",{ref:f,style:{display:"none"}}),(0,i.jsxs)("div",{className:"camera-controls",children:[(0,i.jsxs)("div",{className:"control-row top",children:[y.supportsFlash&&(0,i.jsx)("button",{className:"control-btn flash ".concat(p?"active":""),onClick:Y,disabled:!m,children:"\u26a1"}),(0,i.jsx)("button",{className:"control-btn close",onClick:t,children:"\u2715"})]}),(0,i.jsx)("div",{className:"control-row center",children:(0,i.jsx)("div",{className:"scan-frame",children:(0,i.jsxs)("div",{className:"scan-corners",children:[(0,i.jsx)("div",{className:"corner top-left"}),(0,i.jsx)("div",{className:"corner top-right"}),(0,i.jsx)("div",{className:"corner bottom-left"}),(0,i.jsx)("div",{className:"corner bottom-right"})]})})}),(0,i.jsxs)("div",{className:"control-row bottom",children:[y.supportsZoom&&(0,i.jsxs)("div",{className:"zoom-control",children:[(0,i.jsx)("button",{className:"zoom-btn",onClick:()=>z(Math.max(1,b-.5)),disabled:b<=1,children:"-"}),(0,i.jsxs)("span",{className:"zoom-indicator",children:[b.toFixed(1),"x"]}),(0,i.jsx)("button",{className:"zoom-btn",onClick:()=>z(Math.min(3,b+.5)),disabled:b>=3,children:"+"})]}),(0,i.jsx)("button",{className:"capture-btn",onClick:B,disabled:!m||S,children:S?(0,i.jsx)("div",{className:"analyzing-spinner"}):(0,i.jsx)("div",{className:"capture-ring",children:(0,i.jsx)("div",{className:"capture-inner"})})}),y.hasMultipleCameras&&(0,i.jsx)("button",{className:"control-btn flip-camera",onClick:()=>{M(),setTimeout(()=>{r="user"===r?"environment":"user",A()},100)},children:"\ud83d\udd04"})]})]}),(0,i.jsxs)("div",{className:"camera-instructions",children:[(0,i.jsx)("p",{children:"Point camera at item to scan"}),S&&(0,i.jsx)("p",{className:"analyzing-text",children:"Analyzing image..."})]})]}),k&&(0,i.jsx)("div",{className:"analysis-results-modal",children:(0,i.jsxs)("div",{className:"results-content",children:[(0,i.jsxs)("div",{className:"results-header",children:[(0,i.jsx)("h3",{children:"Item Identified!"}),(0,i.jsx)("button",{className:"close-results",onClick:()=>w(),children:"\u2715"})]}),(0,i.jsxs)("div",{className:"results-body",children:[(0,i.jsxs)("div",{className:"identification",children:[(0,i.jsxs)("h4",{children:["Category: ",k.category]}),(0,i.jsxs)("p",{children:["Confidence: ",Math.round(100*k.confidence),"%"]}),k.colors&&(0,i.jsxs)("p",{children:["Colors: ",k.colors.join(", ")]}),k.brand&&"Generic"!==k.brand&&(0,i.jsxs)("p",{children:["Brand: ",k.brand]})]}),(0,i.jsxs)("div",{className:"recommendations",children:[(0,i.jsx)("h4",{children:"Similar Gifts:"}),(0,i.jsx)("div",{className:"recommendation-list",children:k.recommendations.map((e,a)=>(0,i.jsxs)("div",{className:"recommendation-item",children:[(0,i.jsxs)("div",{className:"rec-info",children:[(0,i.jsx)("h5",{children:e.name}),(0,i.jsxs)("p",{className:"rec-price",children:["$",e.price]})]}),(0,i.jsxs)("div",{className:"match-score",children:[e.match,"% match"]})]},a))})]}),(0,i.jsxs)("div",{className:"results-actions",children:[(0,i.jsx)("button",{className:"btn-primary",onClick:()=>{s&&s(k),w()},children:"View All Matches"}),(0,i.jsx)("button",{className:"btn-secondary",onClick:B,children:"Scan Again"})]})]})]})}),T&&(0,i.jsxs)("div",{className:"analysis-error",children:[(0,i.jsxs)("p",{children:["Analysis failed: ",T]}),(0,i.jsx)("button",{onClick:()=>j(null),children:"Dismiss"})]})]})},h=e=>{let{onScanStart:a,className:s=""}=e;const[t,c]=(0,n.useState)(!1),r=l();return(0,n.useEffect)(()=>{c(r.hasCamera&&!r.error)},[r]),t?(0,i.jsxs)("button",{className:"quick-scan-btn ".concat(s),onClick:a,title:"Scan item with camera",children:[(0,i.jsxs)("div",{className:"scan-icon",children:[(0,i.jsx)("div",{className:"camera-body",children:"\ud83d\udcf7"}),(0,i.jsxs)("div",{className:"scan-lines",children:[(0,i.jsx)("div",{className:"scan-line"}),(0,i.jsx)("div",{className:"scan-line"}),(0,i.jsx)("div",{className:"scan-line"})]})]}),(0,i.jsx)("span",{children:"Scan Item"})]}):null},m={CameraScanner:d,QuickScanButton:h,useCameraCapabilities:l,useImageAnalysis:c}},167:(e,a,s)=>{s.r(a),s.d(a,{PullToRefresh:()=>d,SwipeableGiftCard:()=>r,TouchButton:()=>o,TouchModal:()=>m,TouchSlider:()=>h,default:()=>u,useTouchGestures:()=>c});var t=s(555),n=s(43),i=s(579);const l=["children","onClick","disabled","variant","size","hapticFeedback","className"],c=function(){let{onSwipeLeft:e,onSwipeRight:a,onSwipeUp:s,onSwipeDown:i,onPinchZoom:l,onDoubleTap:c,onLongPress:r,sensitivity:o=50,longPressDuration:d=500}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[h,m]=(0,n.useState)({startX:0,startY:0,endX:0,endY:0,startTime:0,touches:[],isLongPressing:!1,lastTap:0}),u=(0,n.useRef)(null),p=(0,n.useRef)(null);return[{onTouchStart:(0,n.useCallback)(e=>{const a=e.touches[0],s=Date.now();m(n=>(0,t.A)((0,t.A)({},n),{},{startX:a.clientX,startY:a.clientY,endX:a.clientX,endY:a.clientY,startTime:s,touches:Array.from(e.touches),isLongPressing:!1})),r&&1===e.touches.length&&(u.current=setTimeout(()=>{m(e=>(0,t.A)((0,t.A)({},e),{},{isLongPressing:!0})),r(e)},d)),c&&1===e.touches.length&&(s-h.lastTap<300?(c(e),m(e=>(0,t.A)((0,t.A)({},e),{},{lastTap:0}))):m(e=>(0,t.A)((0,t.A)({},e),{},{lastTap:s})))},[r,c,d,h.lastTap]),onTouchMove:(0,n.useCallback)(e=>{e.preventDefault();const a=e.touches[0];if(m(s=>(0,t.A)((0,t.A)({},s),{},{endX:a.clientX,endY:a.clientY,touches:Array.from(e.touches)})),u.current&&(clearTimeout(u.current),u.current=null),l&&2===e.touches.length){const a=e.touches[0],s=e.touches[1],t=Math.hypot(s.clientX-a.clientX,s.clientY-a.clientY);if(2===h.touches.length){const e=h.touches[0],n=h.touches[1],i=Math.hypot(n.clientX-e.clientX,n.clientY-e.clientY);l({scale:t/i,center:{x:(a.clientX+s.clientX)/2,y:(a.clientY+s.clientY)/2}})}}},[l,h.touches]),onTouchEnd:(0,n.useCallback)(n=>{if(u.current&&(clearTimeout(u.current),u.current=null),h.isLongPressing)return;const l=h.endX-h.startX,c=h.endY-h.startY,r=Date.now()-h.startTime;if(0===n.touches.length&&1===h.touches.length){const t=Math.abs(l),n=Math.abs(c);(t>o||n>o)&&r<1e3&&(t>n?l>0&&a?a({deltaX:l,deltaY:c,deltaTime:r}):l<0&&e&&e({deltaX:l,deltaY:c,deltaTime:r}):c>0&&i?i({deltaX:l,deltaY:c,deltaTime:r}):c<0&&s&&s({deltaX:l,deltaY:c,deltaTime:r}))}m(e=>(0,t.A)((0,t.A)({},e),{},{touches:Array.from(n.touches),isLongPressing:!1}))},[h,e,a,s,i,o]),ref:p},h]},r=e=>{let{gift:a,onSwipeLeft:s,onSwipeRight:l,onDoubleTap:r,onLongPress:o,className:d=""}=e;const[h,m]=(0,n.useState)(!1),[u,p]=(0,n.useState)(""),[x,b]=(0,n.useState)(1),g=(0,n.useCallback)(e=>{m(!0),p("translateX(-100%) rotateZ(-10deg)"),b(0),setTimeout(()=>{s&&s(a,e),p(""),b(1),m(!1)},300)},[a,s]),v=(0,n.useCallback)(e=>{m(!0),p("translateX(100%) rotateZ(10deg)"),b(0),setTimeout(()=>{l&&l(a,e),p(""),b(1),m(!1)},300)},[a,l]),j=(0,n.useCallback)(e=>{p("scale(1.05)"),setTimeout(()=>p(""),200),r&&r(a,e)},[a,r]),N=(0,n.useCallback)(e=>{p("scale(0.95)"),setTimeout(()=>p(""),500),o&&o(a,e)},[a,o]),[f]=c({onSwipeLeft:g,onSwipeRight:v,onDoubleTap:j,onLongPress:N,sensitivity:80});return(0,i.jsxs)("div",(0,t.A)((0,t.A)({},f),{},{className:"swipeable-gift-card ".concat(d," ").concat(h?"animating":""),style:{transform:u,opacity:x,transition:h?"all 0.3s ease-out":"transform 0.2s ease-out"},children:[(0,i.jsxs)("div",{className:"card-content",children:[(0,i.jsx)("img",{src:a.image_url||"/api/placeholder/200/200",alt:a.name||a.title,className:"gift-image",draggable:"false"}),(0,i.jsxs)("div",{className:"gift-info",children:[(0,i.jsx)("h3",{children:a.name||a.title}),(0,i.jsxs)("p",{className:"gift-price",children:["$",a.price]}),(0,i.jsxs)("div",{className:"gift-rating",children:["\u2605".repeat(Math.floor(a.success_rate/20)),(0,i.jsxs)("span",{className:"rating-text",children:[a.success_rate,"% success"]})]})]})]}),(0,i.jsxs)("div",{className:"swipe-indicators",children:[(0,i.jsxs)("div",{className:"swipe-hint left",children:[(0,i.jsx)("span",{className:"hint-icon",children:"\ud83d\udc4e"}),(0,i.jsx)("span",{className:"hint-text",children:"Skip"})]}),(0,i.jsxs)("div",{className:"swipe-hint right",children:[(0,i.jsx)("span",{className:"hint-icon",children:"\u2764\ufe0f"}),(0,i.jsx)("span",{className:"hint-text",children:"Like"})]})]})]}))},o=e=>{let{children:a,onClick:s,disabled:c=!1,variant:r="primary",size:o="medium",hapticFeedback:d=!0,className:h=""}=e,m=function(e,a){if(null==e)return{};var s,t,n=function(e,a){if(null==e)return{};var s={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(-1!==a.indexOf(t))continue;s[t]=e[t]}return s}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)s=i[t],-1===a.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}(e,l);const[u,p]=(0,n.useState)(!1),[x,b]=(0,n.useState)([]),g=(0,n.useCallback)(e=>{p(!0),d&&navigator.vibrate&&navigator.vibrate(10);const a=e.currentTarget.getBoundingClientRect(),s=Math.max(a.width,a.height),t=e.touches[0].clientX-a.left-s/2,n=e.touches[0].clientY-a.top-s/2,i={id:Date.now(),x:t,y:n,size:s};b(e=>[...e,i]),setTimeout(()=>{b(e=>e.filter(e=>e.id!==i.id))},600)},[d]),v=(0,n.useCallback)(e=>{p(!1),!c&&s&&setTimeout(()=>s(e),50)},[c,s]),j=["touch-button","touch-button--".concat(r),"touch-button--".concat(o),u&&"touch-button--pressed",c&&"touch-button--disabled",h].filter(Boolean).join(" ");return(0,i.jsxs)("button",(0,t.A)((0,t.A)({className:j,onTouchStart:g,onTouchEnd:v,onTouchCancel:()=>p(!1),disabled:c},m),{},{children:[(0,i.jsx)("span",{className:"button-content",children:a}),x.map(e=>(0,i.jsx)("span",{className:"button-ripple",style:{left:e.x,top:e.y,width:e.size,height:e.size}},e.id))]}))},d=e=>{let{children:a,onRefresh:s,threshold:t=80,maxPull:l=120,className:c=""}=e;const[r,o]=(0,n.useState)(0),[d,h]=(0,n.useState)(!1),[m,u]=(0,n.useState)(!1),p=(0,n.useRef)(null),x=(0,n.useCallback)(e=>{0===window.scrollY&&u(!0)},[]),b=(0,n.useCallback)(e=>{if(!m||d)return;const a=e.touches[0],s=p.current,t=s.dataset.startY||a.clientY;s.dataset.startY||(s.dataset.startY=a.clientY);const n=a.clientY,i=Math.min(l,Math.max(0,.5*(n-t)));o(i),i>0&&e.preventDefault()},[m,d,l]),g=(0,n.useCallback)(async()=>{if(delete p.current.dataset.startY,u(!1),r>=t&&!d){h(!0);try{s&&await s()}catch(e){console.error("Refresh failed:",e)}setTimeout(()=>{h(!1),o(0)},500)}else o(0)},[r,t,d,s]),v=r/t,j=180*v;return(0,i.jsxs)("div",{ref:p,className:"pull-to-refresh ".concat(c),onTouchStart:x,onTouchMove:b,onTouchEnd:g,children:[(0,i.jsx)("div",{className:"pull-indicator",style:{height:r,opacity:v},children:(0,i.jsxs)("div",{className:"pull-content",children:[d?(0,i.jsx)("div",{className:"refresh-spinner",children:(0,i.jsx)("div",{className:"spinner-ring"})}):(0,i.jsx)("div",{className:"refresh-icon",style:{transform:"rotate(".concat(j,"deg)")},children:"\u21bb"}),(0,i.jsx)("span",{className:"pull-text",children:d?"Refreshing...":r>=t?"Release to refresh":"Pull to refresh"})]})}),(0,i.jsx)("div",{className:"refresh-content",style:{transform:"translateY(".concat(r,"px)"),transition:0===r?"transform 0.3s ease-out":"none"},children:a})]})},h=e=>{let{value:a=0,min:s=0,max:t=100,step:l=1,onChange:c,onChangeComplete:r,disabled:o=!1,className:d=""}=e;const[h,m]=(0,n.useState)(!1),[u,p]=(0,n.useState)(a),x=(0,n.useRef)(null),b=(0,n.useRef)(null),g=(0,n.useCallback)(e=>{const a=x.current.getBoundingClientRect(),n=Math.max(0,Math.min(1,(e-a.left)/a.width)),i=s+n*(t-s),c=Math.round(i/l)*l;return Math.max(s,Math.min(t,c))},[s,t,l]),v=(0,n.useCallback)(e=>{if(o)return;m(!0);const a=g(e.touches[0].clientX);p(a),c&&c(a),navigator.vibrate&&navigator.vibrate(5)},[o,g,c]),j=(0,n.useCallback)(e=>{if(!h||o)return;e.preventDefault();const a=g(e.touches[0].clientX);a!==u&&(p(a),c&&c(a),navigator.vibrate&&navigator.vibrate(2))},[h,o,g,c,u]),N=(0,n.useCallback)(()=>{h&&(m(!1),r&&r(u))},[h,r,u]),f=(u-s)/(t-s)*100;return(0,i.jsxs)("div",{ref:x,className:"touch-slider ".concat(h?"dragging":""," ").concat(o?"disabled":""," ").concat(d),onTouchStart:v,onTouchMove:j,onTouchEnd:N,onTouchCancel:N,children:[(0,i.jsx)("div",{className:"slider-track",children:(0,i.jsx)("div",{className:"slider-fill",style:{width:"".concat(f,"%")}})}),(0,i.jsx)("div",{ref:b,className:"slider-thumb",style:{left:"".concat(f,"%")},children:(0,i.jsx)("div",{className:"thumb-indicator",children:(0,i.jsx)("span",{className:"value-display",children:u})})})]})},m=e=>{let{isOpen:a,onClose:s,children:l,title:r,showCloseButton:d=!0,swipeToClose:h=!0,className:m=""}=e;const[u,p]=(0,n.useState)(""),[x,b]=(0,n.useState)(1),g=(0,n.useRef)(null),v=(0,n.useCallback)(e=>{if(!h)return;const{deltaY:a}=e;a>100&&(p("translateY(100%)"),b(0),setTimeout(()=>{s&&s(),p(""),b(1)},300))},[h,s]),[j]=c({onSwipeDown:v,sensitivity:30});return a?(0,i.jsx)("div",{className:"touch-modal-backdrop ".concat(m),style:{opacity:x},children:(0,i.jsxs)("div",(0,t.A)((0,t.A)({ref:g},j),{},{className:"touch-modal-content",style:{transform:u,transition:u?"all 0.3s ease-out":"none"},children:[h&&(0,i.jsx)("div",{className:"modal-handle",children:(0,i.jsx)("div",{className:"handle-bar"})}),(r||d)&&(0,i.jsxs)("div",{className:"modal-header",children:[r&&(0,i.jsx)("h2",{className:"modal-title",children:r}),d&&(0,i.jsx)(o,{variant:"ghost",size:"small",onClick:s,className:"modal-close-btn",children:"\u2715"})]}),(0,i.jsx)("div",{className:"modal-body",children:l})]}))}):null},u={useTouchGestures:c,SwipeableGiftCard:r,TouchButton:o,PullToRefresh:d,TouchSlider:h,TouchModal:m}},652:(e,a,s)=>{s.r(a),s.d(a,{MobileGiftWizard:()=>d,default:()=>N,useMobileWizard:()=>r});var t=s(555),n=s(43),i=s(167),l=s(38),c=s(579);const r=()=>{const[e,a]=(0,n.useState)(0),[s,i]=(0,n.useState)({recipient:{},occasion:{},preferences:{},budget:{},personality:{},relationship:{},scannedItems:[]}),[l,c]=(0,n.useState)(!1),[r,d]=(0,n.useState)([]),h=(0,n.useCallback)((e,a)=>{i(s=>(0,t.A)((0,t.A)({},s),{},{[e]:(0,t.A)((0,t.A)({},s[e]),a)}))},[]),m=(0,n.useCallback)(()=>{a(e=>Math.min(e+1,o.length-1))},[]),u=(0,n.useCallback)(()=>{a(e=>Math.max(e-1,0))},[]),p=(0,n.useCallback)(e=>{a(Math.max(0,Math.min(e,o.length-1)))},[]),x=(0,n.useCallback)(async()=>{try{const e=await j(s);d(e),c(!0)}catch(e){console.error("Failed to generate recommendations:",e)}},[s]);return{currentStep:e,wizardData:s,isComplete:l,recommendations:r,updateWizardData:h,nextStep:m,prevStep:u,goToStep:p,generateRecommendations:x}},o=[{id:"recipient",title:"Who is this gift for?",subtitle:"Tell us about the recipient",icon:"\ud83d\udc64"},{id:"occasion",title:"What's the occasion?",subtitle:"Help us understand the context",icon:"\ud83c\udf89"},{id:"relationship",title:"Your relationship",subtitle:"How do you know them?",icon:"\u2764\ufe0f"},{id:"personality",title:"Their personality",subtitle:"What are they like?",icon:"\ud83c\udf1f"},{id:"preferences",title:"Interests & Hobbies",subtitle:"What do they enjoy?",icon:"\ud83c\udfaf"},{id:"budget",title:"Your budget",subtitle:"What would you like to spend?",icon:"\ud83d\udcb0"},{id:"results",title:"Perfect matches!",subtitle:"Here are your personalized recommendations",icon:"\ud83c\udf81"}],d=e=>{let{onComplete:a,onClose:s,className:d=""}=e;const[m,u]=(0,n.useState)(!1),[p,x]=(0,n.useState)(""),[b,g]=(0,n.useState)(!1),{currentStep:v,wizardData:j,isComplete:N,recommendations:f,updateWizardData:y,nextStep:C,prevStep:w,goToStep:S,generateRecommendations:k}=r(),T=(0,n.useRef)(null),A=(0,n.useCallback)(()=>{v<o.length-1&&(x("left"),u(!0),setTimeout(()=>{C(),u(!1),x("")},300))},[v,C]),M=(0,n.useCallback)(()=>{v>0&&(x("right"),u(!0),setTimeout(()=>{w(),u(!1),x("")},300))},[v,w]),[B]=(0,i.useTouchGestures)({onSwipeLeft:A,onSwipeRight:M,sensitivity:100});(0,n.useEffect)(()=>{v!==o.length-1||N||k()},[v,N,k]);const Y=o[v],z=(v+1)/o.length*100;return(0,c.jsxs)("div",(0,t.A)((0,t.A)({className:"mobile-wizard ".concat(d)},B),{},{ref:T,children:[(0,c.jsxs)("div",{className:"wizard-header",children:[(0,c.jsxs)("div",{className:"header-controls",children:[(0,c.jsx)(i.TouchButton,{variant:"ghost",size:"small",onClick:s,className:"close-btn",children:"\u2715"}),(0,c.jsxs)("div",{className:"step-counter",children:[v+1," of ",o.length]})]}),(0,c.jsx)("div",{className:"progress-bar",children:(0,c.jsx)("div",{className:"progress-fill",style:{width:"".concat(z,"%")}})})]}),(0,c.jsxs)("div",{className:"wizard-content ".concat(m?"sliding-".concat(p):""),children:[(0,c.jsxs)("div",{className:"step-header",children:[(0,c.jsx)("div",{className:"step-icon",children:Y.icon}),(0,c.jsx)("h2",{className:"step-title",children:Y.title}),(0,c.jsx)("p",{className:"step-subtitle",children:Y.subtitle})]}),(0,c.jsx)("div",{className:"step-body",children:h(Y.id,j,y,{onCameraOpen:()=>g(!0),recommendations:f,isComplete:N})})]}),(0,c.jsxs)("div",{className:"wizard-navigation",children:[(0,c.jsx)("div",{className:"nav-dots",children:o.map((e,a)=>(0,c.jsx)("button",{className:"nav-dot ".concat(a===v?"active":""," ").concat(a<v?"completed":""),onClick:()=>S(a),children:(0,c.jsx)("span",{className:"dot-inner"})},e.id))}),(0,c.jsxs)("div",{className:"nav-buttons",children:[v>0&&(0,c.jsx)(i.TouchButton,{variant:"outline",onClick:w,className:"nav-btn prev-btn",children:"\u2190 Back"}),v<o.length-1?(0,c.jsx)(i.TouchButton,{variant:"primary",onClick:C,className:"nav-btn next-btn",children:"Next \u2192"}):N?(0,c.jsx)(i.TouchButton,{variant:"primary",onClick:()=>a&&a(f,j),className:"nav-btn complete-btn",children:"View All Gifts"}):(0,c.jsxs)("div",{className:"generating-message",children:[(0,c.jsx)("div",{className:"spinner"}),"Generating recommendations..."]})]})]}),b&&(0,c.jsx)("div",{className:"camera-modal",children:(0,c.jsx)(l.CameraScanner,{onCapture:e=>{y("scannedItems",[...j.scannedItems,{image:e,timestamp:Date.now()}])},onClose:()=>g(!1),className:"wizard-camera"})}),(0,c.jsxs)("div",{className:"swipe-hints",children:[v>0&&(0,c.jsxs)("div",{className:"swipe-hint left",children:[(0,c.jsx)("span",{className:"hint-arrow",children:"\u2190"}),(0,c.jsx)("span",{className:"hint-text",children:"Swipe for previous"})]}),v<o.length-1&&(0,c.jsxs)("div",{className:"swipe-hint right",children:[(0,c.jsx)("span",{className:"hint-text",children:"Swipe for next"}),(0,c.jsx)("span",{className:"hint-arrow",children:"\u2192"})]})]})]}))},h=(e,a,s,t)=>{switch(e){case"recipient":return(0,c.jsx)(m,{data:a.recipient,onUpdate:s});case"occasion":return(0,c.jsx)(u,{data:a.occasion,onUpdate:s});case"relationship":return(0,c.jsx)(p,{data:a.relationship,onUpdate:s});case"personality":return(0,c.jsx)(x,{data:a.personality,onUpdate:s});case"preferences":return(0,c.jsx)(b,{data:a.preferences,onUpdate:s,onCameraOpen:t.onCameraOpen});case"budget":return(0,c.jsx)(g,{data:a.budget,onUpdate:s});case"results":return(0,c.jsx)(v,{recommendations:t.recommendations,isComplete:t.isComplete});default:return(0,c.jsx)("div",{children:"Step not found"})}},m=e=>{let{data:a,onUpdate:s}=e;return(0,c.jsxs)("div",{className:"recipient-step",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Gender"}),(0,c.jsx)("div",{className:"option-grid",children:["female","male","other"].map(e=>(0,c.jsxs)(i.TouchButton,{variant:a.gender===e?"primary":"outline",onClick:()=>s("recipient",{gender:e}),className:"option-btn",children:["female"===e?"\ud83d\udc69":"male"===e?"\ud83d\udc68":"\ud83d\udc64",(0,c.jsx)("span",{children:e.charAt(0).toUpperCase()+e.slice(1)})]},e))})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Age Group"}),(0,c.jsx)("div",{className:"option-list",children:[{id:"child",label:"Child (0-12)",icon:"\ud83e\uddd2"},{id:"teen",label:"Teenager (13-19)",icon:"\ud83e\uddd1"},{id:"young-adult",label:"Young Adult (20-35)",icon:"\ud83d\udc68"},{id:"adult",label:"Adult (36-55)",icon:"\ud83d\udc69"},{id:"senior",label:"Senior (55+)",icon:"\ud83d\udc74"}].map(e=>(0,c.jsxs)(i.TouchButton,{variant:a.ageGroup===e.id?"primary":"outline",onClick:()=>s("recipient",{ageGroup:e.id}),className:"option-btn full-width",children:[(0,c.jsx)("span",{className:"option-icon",children:e.icon}),(0,c.jsx)("span",{className:"option-label",children:e.label})]},e.id))})]})]})},u=e=>{let{data:a,onUpdate:s}=e;return(0,c.jsxs)("div",{className:"occasion-step",children:[(0,c.jsx)("div",{className:"option-grid",children:[{id:"birthday",label:"Birthday",icon:"\ud83c\udf82"},{id:"anniversary",label:"Anniversary",icon:"\ud83d\udc95"},{id:"christmas",label:"Christmas",icon:"\ud83c\udf84"},{id:"valentines",label:"Valentine's Day",icon:"\ud83d\udc9d"},{id:"graduation",label:"Graduation",icon:"\ud83c\udf93"},{id:"wedding",label:"Wedding",icon:"\ud83d\udc92"},{id:"baby-shower",label:"Baby Shower",icon:"\ud83d\udc76"},{id:"thank-you",label:"Thank You",icon:"\ud83d\ude4f"},{id:"just-because",label:"Just Because",icon:"\u2728"}].map(e=>(0,c.jsxs)(i.TouchButton,{variant:a.occasion===e.id?"primary":"outline",onClick:()=>s("occasion",{occasion:e.id,label:e.label}),className:"occasion-btn",children:[(0,c.jsx)("div",{className:"occasion-icon",children:e.icon}),(0,c.jsx)("div",{className:"occasion-label",children:e.label})]},e.id))}),a.occasion&&(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Any specific date?"}),(0,c.jsx)("input",{type:"date",value:a.date||"",onChange:e=>s("occasion",{date:e.target.value}),className:"date-input"})]})]})},p=e=>{let{data:a,onUpdate:s}=e;return(0,c.jsx)("div",{className:"relationship-step",children:(0,c.jsx)("div",{className:"option-grid",children:[{id:"spouse",label:"Spouse/Partner",icon:"\ud83d\udc91"},{id:"family",label:"Family Member",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"},{id:"friend",label:"Close Friend",icon:"\ud83d\udc6b"},{id:"colleague",label:"Colleague",icon:"\ud83d\udc54"},{id:"acquaintance",label:"Acquaintance",icon:"\ud83e\udd1d"},{id:"child",label:"My Child",icon:"\ud83d\udc76"},{id:"parent",label:"My Parent",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67"},{id:"other",label:"Other",icon:"\ud83d\udcad"}].map(e=>(0,c.jsxs)(i.TouchButton,{variant:a.relationship===e.id?"primary":"outline",onClick:()=>s("relationship",{relationship:e.id,label:e.label}),className:"relationship-btn",children:[(0,c.jsx)("div",{className:"rel-icon",children:e.icon}),(0,c.jsx)("div",{className:"rel-label",children:e.label})]},e.id))})})},x=e=>{let{data:a,onUpdate:s}=e;return(0,c.jsxs)("div",{className:"personality-step",children:[(0,c.jsx)("p",{className:"instruction",children:"Select all that describe them:"}),(0,c.jsx)("div",{className:"trait-grid",children:["Creative","Practical","Adventurous","Homebody","Tech-savvy","Traditional","Trendy","Minimalist","Maximalist","Eco-conscious","Luxury-loving","Budget-conscious","Social","Private","Artistic"].map(e=>(0,c.jsx)(i.TouchButton,{variant:(a.traits||[]).includes(e)?"primary":"outline",onClick:()=>(e=>{const t=a.traits||[],n=t.includes(e)?t.filter(a=>a!==e):[...t,e];s("personality",{traits:n})})(e),className:"trait-btn",children:e},e))})]})},b=e=>{let{data:a,onUpdate:s,onCameraOpen:t}=e;return(0,c.jsxs)("div",{className:"preferences-step",children:[(0,c.jsx)("div",{className:"scan-option",children:(0,c.jsx)(i.TouchButton,{variant:"outline",onClick:t,className:"scan-btn",children:"\ud83d\udcf7 Scan something they love"})}),(0,c.jsx)("div",{className:"divider",children:(0,c.jsx)("span",{children:"or select interests"})}),(0,c.jsx)("div",{className:"category-grid",children:[{id:"fashion",label:"Fashion & Accessories",icon:"\ud83d\udc57"},{id:"tech",label:"Technology",icon:"\ud83d\udcf1"},{id:"home",label:"Home & Garden",icon:"\ud83c\udfe1"},{id:"sports",label:"Sports & Fitness",icon:"\u26bd"},{id:"books",label:"Books & Learning",icon:"\ud83d\udcda"},{id:"art",label:"Art & Crafts",icon:"\ud83c\udfa8"},{id:"music",label:"Music & Audio",icon:"\ud83c\udfb5"},{id:"food",label:"Food & Cooking",icon:"\ud83c\udf73"},{id:"travel",label:"Travel & Adventure",icon:"\u2708\ufe0f"},{id:"beauty",label:"Beauty & Wellness",icon:"\ud83d\udc85"}].map(e=>(0,c.jsxs)(i.TouchButton,{variant:(a.categories||[]).includes(e.id)?"primary":"outline",onClick:()=>(e=>{const t=a.categories||[],n=t.includes(e)?t.filter(a=>a!==e):[...t,e];s("preferences",{categories:n})})(e.id),className:"category-btn",children:[(0,c.jsx)("div",{className:"cat-icon",children:e.icon}),(0,c.jsx)("div",{className:"cat-label",children:e.label})]},e.id))})]})},g=e=>{let{data:a,onUpdate:s}=e;return(0,c.jsxs)("div",{className:"budget-step",children:[(0,c.jsx)("div",{className:"budget-options",children:[{id:"under-25",label:"Under $25",icon:"\ud83d\udcb5"},{id:"25-50",label:"$25 - $50",icon:"\ud83d\udcb4"},{id:"50-100",label:"$50 - $100",icon:"\ud83d\udcb6"},{id:"100-250",label:"$100 - $250",icon:"\ud83d\udcb7"},{id:"250-500",label:"$250 - $500",icon:"\ud83d\udcb8"},{id:"over-500",label:"Over $500",icon:"\ud83d\udcb0"}].map(e=>(0,c.jsxs)(i.TouchButton,{variant:a.range===e.id?"primary":"outline",onClick:()=>s("budget",{range:e.id,label:e.label}),className:"budget-btn",children:[(0,c.jsx)("div",{className:"budget-icon",children:e.icon}),(0,c.jsx)("div",{className:"budget-label",children:e.label})]},e.id))}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Special notes about budget?"}),(0,c.jsx)("textarea",{value:a.notes||"",onChange:e=>s("budget",{notes:e.target.value}),placeholder:"e.g., willing to spend more for the perfect gift...",className:"notes-input"})]})]})},v=e=>{let{recommendations:a,isComplete:s}=e;return s?(0,c.jsxs)("div",{className:"results-step",children:[(0,c.jsxs)("div",{className:"results-summary",children:[(0,c.jsxs)("h3",{children:["We found ",a.length," perfect matches!"]}),(0,c.jsx)("p",{children:"Based on your preferences, here are our top recommendations:"})]}),(0,c.jsx)("div",{className:"recommendation-preview",children:a.slice(0,3).map((e,a)=>(0,c.jsxs)("div",{className:"preview-card",children:[(0,c.jsx)("img",{src:e.image_url||"/api/placeholder/100/100",alt:e.name,className:"preview-image"}),(0,c.jsxs)("div",{className:"preview-info",children:[(0,c.jsx)("h4",{children:e.name}),(0,c.jsxs)("p",{className:"preview-price",children:["$",e.price]}),(0,c.jsxs)("div",{className:"match-score",children:[Math.round(e.match_score),"% match"]})]})]},a))}),(0,c.jsxs)("div",{className:"results-stats",children:[(0,c.jsxs)("div",{className:"stat",children:[(0,c.jsx)("span",{className:"stat-number",children:a.length}),(0,c.jsx)("span",{className:"stat-label",children:"Total Matches"})]}),(0,c.jsxs)("div",{className:"stat",children:[(0,c.jsxs)("span",{className:"stat-number",children:[Math.round(a.reduce((e,a)=>e+a.match_score,0)/a.length),"%"]}),(0,c.jsx)("span",{className:"stat-label",children:"Avg Match"})]})]})]}):(0,c.jsxs)("div",{className:"results-loading",children:[(0,c.jsx)("div",{className:"loading-animation",children:(0,c.jsxs)("div",{className:"gift-boxes",children:[(0,c.jsx)("div",{className:"gift-box",children:"\ud83c\udf81"}),(0,c.jsx)("div",{className:"gift-box",children:"\ud83c\udf81"}),(0,c.jsx)("div",{className:"gift-box",children:"\ud83c\udf81"})]})}),(0,c.jsx)("h3",{children:"Finding perfect gifts..."}),(0,c.jsx)("p",{children:"Analyzing your preferences to find the best matches"})]})},j=async e=>{await new Promise(e=>setTimeout(e,2e3));return[{name:"Wireless Earbuds",price:129.99,match_score:95,image_url:null},{name:"Silk Scarf",price:89.99,match_score:92,image_url:null},{name:"Smart Watch",price:299.99,match_score:90,image_url:null},{name:"Artisan Chocolate Box",price:45.99,match_score:88,image_url:null},{name:"Cozy Blanket",price:79.99,match_score:85,image_url:null},{name:"Essential Oil Set",price:69.99,match_score:83,image_url:null}]},N=d}}]);
//# sourceMappingURL=652.b1b6aaaa.chunk.js.map