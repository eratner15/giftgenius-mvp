"use strict";(self.webpackChunkgiftgenius_frontend=self.webpackChunkgiftgenius_frontend||[]).push([[264],{264:(e,s,t)=>{t.r(s),t.d(s,{GiftSuccessStory:()=>o,ReferralWidget:()=>d,ShareModal:()=>n,SocialProofTicker:()=>l,SocialShareButton:()=>c,SocialSharingManager:()=>r,default:()=>h});var a=t(43),i=t(579);class r{constructor(){this.shareCount=0,this.platforms={twitter:{name:"Twitter",icon:"\ud835\udd4f",color:"#000000",urlTemplate:"https://twitter.com/intent/tweet?text={text}&url={url}&hashtags={hashtags}"},facebook:{name:"Facebook",icon:"f",color:"#1877F2",urlTemplate:"https://www.facebook.com/sharer/sharer.php?u={url}"},whatsapp:{name:"WhatsApp",icon:"\ud83d\udcac",color:"#25D366",urlTemplate:"https://api.whatsapp.com/send?text={text}%20{url}"},pinterest:{name:"Pinterest",icon:"P",color:"#BD081C",urlTemplate:"https://pinterest.com/pin/create/button/?url={url}&description={text}&media={image}"},email:{name:"Email",icon:"\u2709\ufe0f",color:"#4A5568",urlTemplate:"mailto:?subject={subject}&body={text}%20{url}"},sms:{name:"SMS",icon:"\ud83d\udc8c",color:"#10B981",urlTemplate:"sms:?body={text}%20{url}"}}}generateShareUrl(e,s){var t;const a=null===(t=this.platforms[e])||void 0===t?void 0:t.urlTemplate;if(!a)return null;let i=a;return Object.keys(s).forEach(e=>{const t=encodeURIComponent(s[e]||"");i=i.replace("{".concat(e,"}"),t)}),i}trackShare(e,s){this.shareCount++,window.gtag&&window.gtag("event","share",{method:e,content_type:"gift",item_id:null===s||void 0===s?void 0:s.id});const t=JSON.parse(localStorage.getItem("share_history")||"[]");return t.push({platform:e,giftId:null===s||void 0===s?void 0:s.id,timestamp:Date.now()}),localStorage.setItem("share_history",JSON.stringify(t.slice(-50))),this.shareCount}generateShareableContent(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gift";const t={gift:{title:"Check out this amazing gift: ".concat(e.name||e.title),text:"I found the perfect gift on GiftGenius! ".concat(e.name||e.title," - ").concat(e.success_rate||95,"% success rate! \ud83c\udf81"),hashtags:"GiftGenius,PerfectGift,GiftIdeas"},list:{title:"My Gift List on GiftGenius",text:"I've created a gift list on GiftGenius with amazing ideas! Check it out and help me choose! \ud83c\udf81\u2728",hashtags:"GiftGenius,GiftList,GiftIdeas"},success:{title:"Gift Success Story!",text:"Just gave the perfect gift using GiftGenius! ".concat(e.name||e.title," was a huge hit! \ud83c\udf89 Try it yourself:"),hashtags:"GiftGenius,GiftSuccess,HappyPartner"},recommendation:{title:"Gift Recommendation for You",text:"Found this on GiftGenius and thought of you! ".concat(e.name||e.title," would be perfect! \ud83d\udc9d"),hashtags:"GiftGenius,GiftRecommendation,ThoughtfulGift"}};return t[s]||t.gift}async shareNatively(e){if(!navigator.share)return{success:!1,error:"Native sharing not supported"};try{return await navigator.share({title:e.title,text:e.text,url:e.url}),{success:!0}}catch(s){return"AbortError"===s.name?{success:!1,error:"Share cancelled"}:{success:!1,error:s.message}}}}const c=e=>{let{gift:s,platform:t,type:c="gift",className:n="",onShare:l,showLabel:o=!1}=e;const[d,h]=(0,a.useState)(!1),m=(0,a.useMemo)(()=>new r,[]),u=(0,a.useCallback)(async()=>{h(!0);const e=m.generateShareableContent(s,c),a=window.location.href,i={text:e.text,url:a,hashtags:e.hashtags,subject:e.title,image:(null===s||void 0===s?void 0:s.image_url)||""},r=m.generateShareUrl(t,i);r&&(window.open(r,"_blank","width=600,height=400"),m.trackShare(t,s),l&&l(t,s)),setTimeout(()=>h(!1),1e3)},[s,t,c,l,m]),f=m.platforms[t];return f?(0,i.jsxs)("button",{className:"social-share-btn ".concat(t," ").concat(d?"sharing":""," ").concat(n),onClick:u,style:{backgroundColor:f.color},title:"Share on ".concat(f.name),children:[(0,i.jsx)("span",{className:"share-icon",children:f.icon}),o&&(0,i.jsx)("span",{className:"share-label",children:f.name}),d&&(0,i.jsx)("span",{className:"share-spinner"})]}):null},n=e=>{let{gift:s,isOpen:t,onClose:n,onShare:l}=e;const[o,d]=(0,a.useState)("gift"),[h,m]=(0,a.useState)(""),[u,f]=(0,a.useState)(!1),p=new r,x="".concat(window.location.origin,"/gift/").concat((null===s||void 0===s?void 0:s.id)||"");return t?(0,i.jsx)("div",{className:"share-modal-backdrop",onClick:n,children:(0,i.jsxs)("div",{className:"share-modal-content",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"share-modal-header",children:[(0,i.jsx)("h2",{children:"Share This Gift"}),(0,i.jsx)("button",{className:"close-btn",onClick:n,children:"\u2715"})]}),(0,i.jsxs)("div",{className:"share-modal-body",children:[(0,i.jsxs)("div",{className:"gift-preview",children:[(0,i.jsx)("img",{src:(null===s||void 0===s?void 0:s.image_url)||"/api/placeholder/100/100",alt:(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.title),className:"gift-preview-image"}),(0,i.jsxs)("div",{className:"gift-preview-info",children:[(0,i.jsx)("h3",{children:(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.title)}),(0,i.jsxs)("p",{children:["$",null===s||void 0===s?void 0:s.price]})]})]}),(0,i.jsxs)("div",{className:"share-type-selector",children:[(0,i.jsx)("label",{children:"Share as:"}),(0,i.jsx)("div",{className:"type-options",children:["gift","success","recommendation"].map(e=>(0,i.jsx)("button",{className:"type-option ".concat(o===e?"active":""),onClick:()=>d(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,i.jsxs)("div",{className:"custom-message",children:[(0,i.jsx)("label",{children:"Add a personal message (optional):"}),(0,i.jsx)("textarea",{value:h,onChange:e=>m(e.target.value),placeholder:"What makes this gift special...",rows:"3"})]}),(0,i.jsxs)("div",{className:"share-platforms",children:[(0,i.jsx)("h3",{children:"Share via:"}),(0,i.jsx)("div",{className:"platform-grid",children:Object.keys(p.platforms).map(e=>(0,i.jsx)(c,{gift:s,platform:e,type:o,onShare:l,showLabel:!0},e))})]}),navigator.share&&(0,i.jsxs)("button",{className:"native-share-btn",onClick:async()=>{const e=p.generateShareableContent(s,o);(await p.shareNatively({title:e.title,text:h||e.text,url:x})).success&&(p.trackShare("native",s),l&&l("native",s))},children:[(0,i.jsx)("span",{children:"\ud83d\udce4"})," Share with your apps"]}),(0,i.jsxs)("div",{className:"share-link",children:[(0,i.jsx)("input",{type:"text",value:x,readOnly:!0,className:"share-url-input"}),(0,i.jsx)("button",{className:"copy-btn ".concat(u?"copied":""),onClick:async()=>{try{await navigator.clipboard.writeText(x),f(!0),setTimeout(()=>f(!1),2e3),p.trackShare("clipboard",s)}catch(e){console.error("Failed to copy:",e)}},children:u?"\u2713 Copied!":"\ud83d\udccb Copy"})]})]})]})}):null},l=e=>{let{activities:s=[]}=e;const[t,r]=(0,a.useState)(0),[c,n]=(0,a.useState)(!0);if((0,a.useEffect)(()=>{if(0===s.length)return;const e=setInterval(()=>{n(!1),setTimeout(()=>{r(e=>(e+1)%s.length),n(!0)},300)},4e3);return()=>clearInterval(e)},[s.length]),0===s.length)return null;const l=s[t];return(0,i.jsx)("div",{className:"social-proof-ticker ".concat(c?"visible":""),children:(0,i.jsxs)("div",{className:"ticker-content",children:[(0,i.jsx)("span",{className:"ticker-icon",children:"purchase"===l.type?"\ud83d\udecd\ufe0f":"share"===l.type?"\ud83d\udce4":"view"===l.type?"\ud83d\udc40":"\ud83c\udf81"}),(0,i.jsxs)("span",{className:"ticker-text",children:[(0,i.jsx)("strong",{children:l.user})," ",l.action," ",(0,i.jsx)("em",{children:l.item})]}),(0,i.jsx)("span",{className:"ticker-time",children:l.time})]})})},o=e=>{let{story:s,onShare:t,onInspire:r}=e;const[n,l]=(0,a.useState)(s.likes||0),[o,d]=(0,a.useState)(!1);return(0,i.jsxs)("div",{className:"success-story-card",children:[(0,i.jsxs)("div",{className:"story-header",children:[(0,i.jsxs)("div",{className:"story-author",children:[(0,i.jsx)("div",{className:"author-avatar",children:s.author.charAt(0).toUpperCase()}),(0,i.jsxs)("div",{className:"author-info",children:[(0,i.jsx)("h4",{children:s.author}),(0,i.jsx)("p",{className:"story-date",children:s.date})]})]}),(0,i.jsx)("div",{className:"story-badge",children:"\u2728 Success Story"})]}),(0,i.jsxs)("div",{className:"story-content",children:[(0,i.jsx)("h3",{children:s.title}),(0,i.jsx)("p",{children:s.description}),s.gift&&(0,i.jsxs)("div",{className:"story-gift",children:[(0,i.jsx)("img",{src:s.gift.image_url||"/api/placeholder/60/60",alt:s.gift.name}),(0,i.jsxs)("div",{className:"gift-info",children:[(0,i.jsx)("h5",{children:s.gift.name}),(0,i.jsxs)("p",{children:["$",s.gift.price]})]})]}),(0,i.jsxs)("div",{className:"story-metrics",children:[(0,i.jsxs)("div",{className:"metric",children:[(0,i.jsx)("span",{className:"metric-icon",children:"\u2764\ufe0f"}),(0,i.jsx)("span",{className:"metric-label",children:"Partner's Reaction:"}),(0,i.jsx)("span",{className:"metric-value",children:s.reaction||"Ecstatic!"})]}),(0,i.jsxs)("div",{className:"metric",children:[(0,i.jsx)("span",{className:"metric-icon",children:"\u2b50"}),(0,i.jsx)("span",{className:"metric-label",children:"Success Rating:"}),(0,i.jsxs)("span",{className:"metric-value",children:[s.rating||10,"/10"]})]})]})]}),(0,i.jsxs)("div",{className:"story-actions",children:[(0,i.jsxs)("button",{className:"like-btn ".concat(o?"liked":""),onClick:()=>{if(!o){l(n+1),d(!0);const e=JSON.parse(localStorage.getItem("liked_stories")||"[]");e.push(s.id),localStorage.setItem("liked_stories",JSON.stringify(e))}},children:[(0,i.jsx)("span",{className:"like-icon",children:o?"\u2764\ufe0f":"\ud83e\udd0d"}),(0,i.jsx)("span",{className:"like-count",children:n})]}),(0,i.jsx)("button",{className:"inspire-btn",onClick:()=>r&&r(s),children:"\ud83d\udca1 Get Similar Gift"}),(0,i.jsx)(c,{gift:s.gift,platform:"twitter",type:"success",onShare:t,className:"story-share-btn"})]})]})},d=e=>{let{userId:s,onReferralSuccess:t}=e;const[r,n]=(0,a.useState)(""),[l,o]=(0,a.useState)({totalReferrals:0,successfulReferrals:0,rewardsEarned:0}),[d,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{var e;const t="GIFT".concat((null===s||void 0===s||null===(e=s.substring(0,6))||void 0===e?void 0:e.toUpperCase())||"GENIUS");n(t);const a=JSON.parse(localStorage.getItem("referral_stats")||"{}");o(a)},[s]);const m="".concat(window.location.origin,"?ref=").concat(r);return(0,i.jsxs)("div",{className:"referral-widget",children:[(0,i.jsxs)("div",{className:"referral-header",children:[(0,i.jsx)("h3",{children:"\ud83c\udf81 Invite Friends & Earn Rewards"}),(0,i.jsx)("p",{children:"Share GiftGenius and get 20% off for each friend who joins!"})]}),(0,i.jsx)("div",{className:"referral-code-section",children:(0,i.jsxs)("div",{className:"code-display",children:[(0,i.jsx)("label",{children:"Your Referral Code:"}),(0,i.jsxs)("div",{className:"code-box",children:[(0,i.jsx)("span",{className:"code",children:r}),(0,i.jsx)("button",{className:"copy-code-btn ".concat(d?"copied":""),onClick:async()=>{try{await navigator.clipboard.writeText(m),h(!0),setTimeout(()=>h(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},children:d?"\u2713":"\ud83d\udccb"})]})]})}),(0,i.jsxs)("div",{className:"referral-stats",children:[(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("span",{className:"stat-number",children:l.totalReferrals}),(0,i.jsx)("span",{className:"stat-label",children:"Friends Invited"})]}),(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("span",{className:"stat-number",children:l.successfulReferrals}),(0,i.jsx)("span",{className:"stat-label",children:"Joined"})]}),(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsxs)("span",{className:"stat-number",children:["$",l.rewardsEarned]}),(0,i.jsx)("span",{className:"stat-label",children:"Rewards Earned"})]})]}),(0,i.jsxs)("div",{className:"referral-actions",children:[(0,i.jsx)("button",{className:"share-referral-btn",onClick:async()=>{if(navigator.share)try{await navigator.share({title:"Join me on GiftGenius!",text:"Use my code ".concat(r," to get 20% off your first gift! Find perfect gifts every time with GiftGenius."),url:m})}catch(e){console.error("Share failed:",e)}},children:"\ud83d\udce4 Share Invite"}),(0,i.jsx)("div",{className:"social-referral-buttons",children:["whatsapp","facebook","twitter","email"].map(e=>(0,i.jsx)(c,{gift:{name:"GiftGenius Invitation"},platform:e,type:"recommendation",className:"referral-social-btn"},e))})]}),(0,i.jsxs)("div",{className:"referral-benefits",children:[(0,i.jsx)("h4",{children:"How it works:"}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"Share your unique code with friends"}),(0,i.jsx)("li",{children:"They get 20% off their first gift"}),(0,i.jsx)("li",{children:"You get 20% off your next purchase"}),(0,i.jsx)("li",{children:"Earn bonus rewards for 5+ referrals!"})]})]})]})},h={SocialSharingManager:r,SocialShareButton:c,ShareModal:n,SocialProofTicker:l,GiftSuccessStory:o,ReferralWidget:d}}}]);
//# sourceMappingURL=264.944eb5c2.chunk.js.map